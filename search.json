[{"path":"https://lvaudor.github.io/glitter/articles/glitter_for_SyMoGih.html","id":"rechercher-toutes-les-informations-impliquant-lobjet-mathématiques-objet-abstrait","dir":"Articles","previous_headings":"","what":"Rechercher toutes les informations impliquant l’objet “Mathématiques” (Objet abstrait):","title":"glitter for SyMoGIH","text":"la ressource r est associée à l’objet “Mathématiques” (syr: Ab0b213) la ressource r est une partie de et une date standard stDate et un type KUTy KUTy pour étiquette KUTyLabel","code":"tib=spq_init() %>%   spq_prefix(prefixes=c(sym=\"http://symogih.org/ontology/\",                         syr=\"http://symogih.org/resource/\")) %>%    spq_add(\"?r sym:associatesObject syr:AbOb213\") %>%    spq_add(\"?r sym:isComponentOf ?i\") %>%    spq_add(\"?i sym:knowledgeUnitStandardLabel ?stLabel\") %>%    spq_add(\". sym:knowledgeUnitStandardDate ?stDate\") %>%    spq_add(\". sym:hasKnowledgeUnitType ?KUTy\") %>%    spq_add(\"?KUTy rdfs:label ?KUTyLabel\") %>%    spq_head(n=10) %>%    spq_perform(endpoint=\"http://bhp-publi.ish-lyon.cnrs.fr:8888/sparql\")    knitr::kable(tib)"},{"path":"https://lvaudor.github.io/glitter/articles/glitter_for_SyMoGih.html","id":"structure-de-la-partie-abstraite-de-lontologie","dir":"Articles","previous_headings":"","what":"Structure de la partie abstraite de l’ontologie","title":"glitter for SyMoGIH","text":"","code":"tib=spq_init() %>%   spq_prefix(prefixes=c(sym=\"http://symogih.org/ontology/\",                         syr=\"http://symogih.org/resource/\")) %>%     spq_add(\"?s a ?cl\") %>%    spq_add(\"?s ?p ?o1\") %>%    spq_add(\"?o1 a ?cl1\", required=FALSE) %>%    spq_group_by(cl, p, cl1) %>%    spq_head(n=10) %>%    spq_summarise(effectif = n(\"*\")) %>%    spq_arrange(desc(effectif)) %>%    spq_perform(endpoint=\"http://bhp-publi.ish-lyon.cnrs.fr:8888/sparql\")  knitr::kable(tib)"},{"path":"https://lvaudor.github.io/glitter/articles/glitter_for_SyMoGih.html","id":"structure-de-la-partie-instanciée-de-lontologie","dir":"Articles","previous_headings":"","what":"Structure de la partie instanciée de l’ontologie","title":"glitter for SyMoGIH","text":"","code":"tib=spq_init() %>%   spq_prefix(prefixes=c(sym=\"http://symogih.org/ontology/\",                         syr=\"http://symogih.org/resource/\")) %>%    spq_add(\"?s sym:hasKnowledgeUnitType ?tyin\") %>%    spq_add(\"?r sym:isComponentOf ?s\") %>%    spq_add(\"?r sym:hasRoleType ?tyro\") %>%    spq_group_by(tyin, tyro) %>%    spq_summarise(effectif = n(\"*\")) %>%    spq_arrange(tyin,tyro,desc(effectif)) %>%    spq_head(n=10) %>%    spq_perform(endpoint=\"http://bhp-publi.ish-lyon.cnrs.fr:8888/sparql\")"},{"path":"https://lvaudor.github.io/glitter/articles/glitter_for_SyMoGih.html","id":"types-dinformations-et-types-de-rôles-avec-effectifs","dir":"Articles","previous_headings":"","what":"Types d’informations et types de rôles, avec effectifs","title":"glitter for SyMoGIH","text":"","code":"tib=spq_init() %>%    spq_prefix(prefixes=c(sym=\"http://symogih.org/ontology/\",                         syr=\"http://symogih.org/resource/\")) %>%    spq_add(\"?s sym:hasKnowledgeUnitType ?tyin\") %>%    spq_add(\"?r sym:isComponentOf ?s\") %>%    spq_add(\"?r sym:hasRoleType ?tyro\") %>%    spq_group_by(tyin, tyro) %>%    spq_summarise(effectif = n(\"*\")) %>%    spq_arrange(tyin, tyro, effectif) %>%    spq_head(n=10) %>%   spq_perform(endpoint=\"http://bhp-publi.ish-lyon.cnrs.fr:8888/sparql\")  knitr::kable(tib)"},{"path":"https://lvaudor.github.io/glitter/articles/glitter_for_SyMoGih.html","id":"le-parcours-biographique-de-gastonlouis-henry-may-1849---1940","dir":"Articles","previous_headings":"","what":"Le parcours biographique de Gaston,Louis, Henry May (1849 - 1940)","title":"glitter for SyMoGIH","text":"","code":"tib=spq_init() %>%    spq_prefix(prefixes=c(sym=\"http://symogih.org/ontology/\",                         syr=\"http://symogih.org/resource/\")) %>%    spq_add(\"?tyro rdfs:label ?TyRoLabel\") %>%    spq_add(\"?tyin rdfs:label ?TyInLabel\") %>%    spq_add(\"?s ?p syr:Actr56241\") %>%    spq_add(\". sym:isComponentOf ?info\") %>%    spq_add(\". sym:hasRoleType ?tyro\") %>%    spq_add(\"?info sym:knowledgeUnitStandardLabel ?infoStandardLabel\") %>%    spq_add(\". sym:knowledgeUnitStandardDate ?infoStandardDate\") %>%    spq_add(\". sym:hasKnowledgeUnitType ?tyin\") %>%    spq_arrange(infoStandardDate) %>%    spq_head(n=10) %>%    spq_perform(endpoint=\"http://bhp-publi.ish-lyon.cnrs.fr:8888/sparql\")  knitr::kable(tib)"},{"path":"https://lvaudor.github.io/glitter/articles/glitter_for_Wikidata.html","id":"find-items-and-properties-to-build-your-query","dir":"Articles","previous_headings":"","what":"Find items and properties to build your query","title":"glitter for Wikidata","text":"find identifiers items properties interest, can: browse Wikidata use package WikidataR (functions find_item(),find_property()). glitter functions might used start exploring data.","code":""},{"path":"https://lvaudor.github.io/glitter/articles/glitter_for_Wikidata.html","id":"example-1-lyon-metro","dir":"Articles","previous_headings":"","what":"Example 1: Lyon Metro","title":"glitter for Wikidata","text":"Imagine interested Wikidata available regarding Lyon Metro network. Let’s try see Wikidata : ’d interested, instance, subway stations part network. ’re looking stations part (“wd:P361”) Lyon metro network (“wd:Q1552”). access information : Notice values yet stations (’s ’re looking ) hence use “?” beginning subject string. also get labels stations, can use argument label: now, get 50 items, stations also types items metro lines. Let’s look item “Place Guichard - Bourse du Travail” (Q59855) know correspond station. function get_claims() package glitter enables see direct wikidata properties (values) based item’s id. Property “wdt:P31” enable us collect stations (“wd:Q928830”) instead parts Lyon Metro network. can enrich refine query incrementally spq_add() sending (whereas get_triplets() shortcut build send simple requests) : now get 42 stations part Lyon metro network. wanted get properties associated values stations (instance location (“wdt:P625”)) proceed way: tibble can easily transform Simple feature collection (sfc) : glitter provides functions clean transform “raw” Wikidata tibbles tibbles easier use R. Function clean_wikidata_table() lightens columns wikidata-formatted URIs: Function transform_wikidata_coords() get coordinates longitude (lng) latitude (lat) based Wikidata WKT formatting spatial coordinates (“Point(lng lat)”). resulting table may used easily (instance) package leaflet:","code":"find_item(\"Metro Lyon\") #>  #>  Wikidata item search #>  #> Number of results:    1  #>  #> Results: #> 1     Lyon Metro (Q1552) - public transportation network in Lyon, France find_property(\"part of\") #>  #>  Wikidata property search #>  #> Number of results:    10  #>  #> Results: #> 1     part of (P361) - object of which the subject is a part (if this subject is already part of object A which is a part of object B, then please only make the subject part of object A). Inverse property of \"has part\" (P527, see also \"has parts of the class\" (P2670)).  #> 2     parent organization (P749) - parent organization of an organization, opposite of subsidiaries (P355)  #> 3     published in (P1433) - larger work that a given work was published in, like a book, journal or music album  #> 4     constellation (P59) - the area of the celestial sphere of which the subject is a part (from a scientific standpoint, not an astrological one)  #> 5     part of the series (P179) - series which contains the subject  #> 6     on focus list of Wikimedia project (P5008) - property to indicate that an item is of particular interest for a Wikimedia project. This property does not add notability. Items should not be created with this property if they are not notable for Wikidata. See also P6104, P972, P2354.  #> 7     member of sports team (P54) - sports teams or clubs that the subject represents or represented  #> 8     transport network (P16) - network the infrastructure is a part of  #> 9     partially coincident with (P1382) - object that is partially part of, but not fully part of (P361), the subject  #> 10    diaspora (P3833) - diaspora that a cultural group belongs to stations=get_triplets(\"?items wdt:P361 wd:Q1552\") stations %>% head() #> # A tibble: 6 × 1 #>   items                                  #>   <chr>                                  #> 1 http://www.wikidata.org/entity/Q2944   #> 2 http://www.wikidata.org/entity/Q2965   #> 3 http://www.wikidata.org/entity/Q2969   #> 4 http://www.wikidata.org/entity/Q2976   #> 5 http://www.wikidata.org/entity/Q5298   #> 6 http://www.wikidata.org/entity/Q599865 parts_metro_Lyon=get_triplets(\"?items wdt:P361 wd:Q1552\", label=\"?items\") parts_metro_Lyon %>% head() #> # A tibble: 6 × 2 #>   items                                  itemsLabel                         #>   <chr>                                  <chr>                              #> 1 http://www.wikidata.org/entity/Q2944   Lyon Metro Line A                  #> 2 http://www.wikidata.org/entity/Q2965   Lyon Metro Line B                  #> 3 http://www.wikidata.org/entity/Q2969   Lyon Metro Line C                  #> 4 http://www.wikidata.org/entity/Q2976   Lyon Metro Line D                  #> 5 http://www.wikidata.org/entity/Q5298   Bellecour                          #> 6 http://www.wikidata.org/entity/Q599865 Place Guichard - Bourse du Travail get_claims(\"wd:Q599865\") #> # A tibble: 18 × 7 #>    property         propertyLabel value valueLabel propertyType propertyDescrip… #>    <chr>            <chr>         <chr> <chr>      <chr>        <chr>            #>  1 http://www.wiki… NA            http… France     NA           NA               #>  2 http://www.wiki… NA            http… http://co… NA           NA               #>  3 http://www.wiki… NA            http… Europe     NA           NA               #>  4 http://www.wiki… NA            http… metro sta… NA           NA               #>  5 http://www.wiki… NA            http… station l… NA           NA               #>  6 http://www.wiki… NA            http… Lyon Metr… NA           NA               #>  7 http://www.wiki… NA            http… 3rd arron… NA           NA               #>  8 http://www.wiki… NA            http… Saxe - Ga… NA           NA               #>  9 http://www.wiki… NA            http… Gare Part… NA           NA               #> 10 http://www.wiki… NA            43    43         NA           NA               #> 11 http://www.wiki… NA            http… Lyon Metro NA           NA               #> 12 http://www.wiki… NA            http… thoroughf… NA           NA               #> 13 http://www.wiki… NA            Plac… Place Gui… NA           NA               #> 14 http://www.wiki… NA            1981… 1981-09-1… NA           NA               #> 15 http://www.wiki… NA            Poin… Point(4.8… NA           NA               #> 16 http://www.wiki… NA            2.0   2          NA           NA               #> 17 http://www.wiki… NA            1981… 1981-09-1… NA           NA               #> 18 http://www.wiki… NA            /g/1… /g/1s04bf… NA           NA               #> # … with 1 more variable: propertyAltLabel <chr> stations_metro_Lyon=spq_init() %>%    spq_add(\"?stations wdt:P361 wd:Q1552\", label=\"?stations\") %>%    spq_add(\"?stations wdt:P31 wd:Q928830\") %>%    spq_perform() head(stations_metro_Lyon) #> # A tibble: 6 × 2 #>   stations                                stationsLabel                      #>   <chr>                                   <chr>                              #> 1 http://www.wikidata.org/entity/Q5298    Bellecour                          #> 2 http://www.wikidata.org/entity/Q599865  Place Guichard - Bourse du Travail #> 3 http://www.wikidata.org/entity/Q613893  Hôtel de Ville - Louis Pradel      #> 4 http://www.wikidata.org/entity/Q776088  Cordeliers                         #> 5 http://www.wikidata.org/entity/Q934869  Gare de Vénissieux                 #> 6 http://www.wikidata.org/entity/Q1847502 Stade de Gerland stations_metro_Lyon=spq_init() %>%    spq_add(\"?stations wdt:P361 wd:Q1552\", label=\"?stations\") %>%    spq_add(\"?stations wdt:P31 wd:Q928830\") %>%    spq_add(\"?stations wdt:P625 ?coords\") %>%    spq_perform() head(stations_metro_Lyon) #> # A tibble: 6 × 3 #>   stations                                stationsLabel                   coords #>   <chr>                                   <chr>                           <chr>  #> 1 http://www.wikidata.org/entity/Q5298    Bellecour                       Point… #> 2 http://www.wikidata.org/entity/Q599865  Place Guichard - Bourse du Tra… Point… #> 3 http://www.wikidata.org/entity/Q613893  Hôtel de Ville - Louis Pradel   Point… #> 4 http://www.wikidata.org/entity/Q776088  Cordeliers                      Point… #> 5 http://www.wikidata.org/entity/Q934869  Gare de Vénissieux              Point… #> 6 http://www.wikidata.org/entity/Q1847502 Stade de Gerland                Point… stations_metro_Lyon.shp=sf::st_as_sf(stations_metro_Lyon, wkt = \"coords\") plot(stations_metro_Lyon.shp$coords) stations_metro_Lyon=clean_wikidata_table(stations_metro_Lyon) stations_metro_Lyon=stations_metro_Lyon %>%    transform_wikidata_coords(\"coords\") leaflet::leaflet(stations_metro_Lyon) %>%   leaflet::addTiles() %>%   leaflet::addCircles(popup=~stationsLabel)"},{"path":"https://lvaudor.github.io/glitter/articles/glitter_for_Wikidata.html","id":"example-2-cities-around-lyon","dir":"Articles","previous_headings":"","what":"Example 2 : cities around Lyon","title":"glitter for Wikidata","text":"Now, let’s imagine interested cities 200km radius around Lyon. start exploring Wikidata query finds items instances (“wdt:P31”) “city” subclass (“wdt:P279”) “city” . query might return many items seems reasonable limit number items retrieved now argument limit Now, let’s get location (“wdt:P625”) cities can refine query, stating want cities (items subclasses city) radius 5km around Lyon (lat-long coordinates ~ 45.76 4.84). use argument within_distance:","code":"find_item(\"Lyon\") #>  #>  Wikidata item search #>  #> Number of results:    10  #>  #> Results: #> 1     Lyon (Q456) - commune in the metropolis of Lyon, France  #> 2     Olympique Lyonnais (Q704) - association football club in Lyon, France  #> 3     Lyon (Q30102635) - family name  #> 4     Marcus Ward Lyon, Jr. (Q3290305) - U.S. mammalogist, bacteriologist, and pathologist (1875–1942)  #> 5     Lyon (Q294688) - Wikimedia disambiguation page  #> 6     Lyon (Q867818) - town in Coahoma County, Mississippi, United States  #> 7     9381 Lyon (Q1192758) - asteroid  #> 8     Lyon (Q30014648) - male given name  #> 9     Jacob Lyon (Q18608055)  #> 10    Harold Lloyd Lyon (Q18911234) - botanist (1879-1957) find_item(\"city\") #>  #>  Wikidata item search #>  #> Number of results:    10  #>  #> Results: #> 1     city (Q515) - large permanent human settlement  #> 2     Manchester City F.C. (Q50602) - association football club in Manchester, England  #> 3     Leicester City F.C. (Q19481) - association football club in Leicester, England  #> 4     Stoke City F.C. (Q18736) - association football club in Stoke-on-Trent, England  #> 5     Birmingham City F.C. (Q19444) - association football club in Birmingham, England  #> 6     Cardiff City F.C. (Q18662) - association football club in Cardiff, Wales  #> 7     Norwich City F.C. (Q18721) - association football club in Norwich, England  #> 8     Swansea City A.F.C. (Q18659) - association football club in Swansea, Wales  #> 9     Hull City A.F.C. (Q19477) - association football club in Kingston upon Hull, England  #> 10    Bradford City A.F.C. (Q48879) - association football club in Bradford, England spq_init() %>%    spq_add(\"?city wdt:P31/wdt:P279* wd:Q515\", label=\"?city\") %>%   spq_head(n=10) %>%    spq_perform() #> # A tibble: 10 × 2 #>    city                                     cityLabel                  #>    <chr>                                    <chr>                      #>  1 http://www.wikidata.org/entity/Q309436   Aït Benhaddou              #>  2 http://www.wikidata.org/entity/Q817274   Beni Isguen                #>  3 http://www.wikidata.org/entity/Q2670896  Ksar Ouled Soltane         #>  4 http://www.wikidata.org/entity/Q3200131  Ksar Ifegh                 #>  5 http://www.wikidata.org/entity/Q3200135  Ksar of Lamaarka           #>  6 http://www.wikidata.org/entity/Q3818705  Ksar Nalut                 #>  7 http://www.wikidata.org/entity/Q11736787 Ksar Hallouf               #>  8 http://www.wikidata.org/entity/Q12233025 Ksar Beni Barka            #>  9 http://www.wikidata.org/entity/Q16593169 Ksar of Taourirt           #> 10 http://www.wikidata.org/entity/Q21029712 Ksar of Rgabi N'Ait Hassou spq_init() %>%    spq_add(\"?city wdt:P31/wdt:P279* wd:Q515\",           label=c(\"?city\")) %>%    spq_add(\"?city wdt:P625 ?coords\") %>%   spq_head(n=10) %>%    spq_perform() #> # A tibble: 10 × 3 #>    city                                     cityLabel                  coords    #>    <chr>                                    <chr>                      <chr>     #>  1 http://www.wikidata.org/entity/Q309436   Aït Benhaddou              Point(-7… #>  2 http://www.wikidata.org/entity/Q817274   Beni Isguen                Point(3.… #>  3 http://www.wikidata.org/entity/Q2670896  Ksar Ouled Soltane         Point(10… #>  4 http://www.wikidata.org/entity/Q3200131  Ksar Ifegh                 Point(-5… #>  5 http://www.wikidata.org/entity/Q3200135  Ksar of Lamaarka           Point(-4… #>  6 http://www.wikidata.org/entity/Q3818705  Ksar Nalut                 Point(10… #>  7 http://www.wikidata.org/entity/Q11736787 Ksar Hallouf               Point(10… #>  8 http://www.wikidata.org/entity/Q12233025 Ksar Beni Barka            Point(10… #>  9 http://www.wikidata.org/entity/Q16593169 Ksar of Taourirt           Point(-6… #> 10 http://www.wikidata.org/entity/Q21029712 Ksar of Rgabi N'Ait Hassou Point(-5… cities_around_Lyon=spq_init() %>%    spq_add(\"?city wdt:P31/wdt:P279* wd:Q486972\",           label=\"?city\") %>%    spq_add(\"?city wdt:P625 ?coords\",           within_distance=list(center=c(long=4.84,lat=45.76),                                radius=5)) %>%    spq_perform() head(cities_around_Lyon) #> # A tibble: 6 × 3 #>   city                                     cityLabel      coords                 #>   <chr>                                    <chr>          <chr>                  #> 1 http://www.wikidata.org/entity/Q8297     Les Brotteaux  Point(4.85027778 45.7… #> 2 http://www.wikidata.org/entity/Q2904730  Bissardon      Point(4.83879 45.7834) #> 3 http://www.wikidata.org/entity/Q3209735  La Guillotière Point(4.8431 45.7553)  #> 4 http://www.wikidata.org/entity/Q20987614 Buers          Point(4.89223385 45.7… #> 5 http://www.wikidata.org/entity/Q16507694 Croix-Luizet   Point(4.88347 45.7808) #> 6 http://www.wikidata.org/entity/Q3554954  Vassieux       Point(4.86555 45.7976)"},{"path":"https://lvaudor.github.io/glitter/articles/glitter_for_dataBNF.html","id":"explorer-les-données","dir":"Articles","previous_headings":"","what":"Explorer les données","title":"glitter for dataBNF","text":"","code":"tib=spq_init() %>%    spq_add(\"?s ?p ?o\") %>%    spq_head(10) %>%    spq_perform(endpoint=\"dataBNF\")  knitr::kable(tib)"},{"path":"https://lvaudor.github.io/glitter/articles/glitter_for_dataBNF.html","id":"dates-biographiques-dun-auteur","dir":"Articles","previous_headings":"","what":"Dates biographiques d’un auteur","title":"glitter for dataBNF","text":"","code":"tib=spq_init() %>%    spq_add(\"?auteur foaf:birthday ?jour\") %>%    spq_add(\"?auteur bio:birth ?date1\") %>%    spq_add(\"?auteur bio:death ?date2\") %>%    spq_add(\"?auteur foaf:name ?nom\", required=FALSE) %>%    spq_arrange(jour) %>%    spq_prefix() %>%    spq_head(n=10) %>%   spq_perform(endpoint=\"dataBNF\")  knitr::kable(tib)"},{"path":"https://lvaudor.github.io/glitter/articles/glitter_for_dataBNF.html","id":"toutes-les-éditions-de-loeuvre-les-fleurs-du-mal-de-baudelaire","dir":"Articles","previous_headings":"","what":"Toutes les éditions de l’oeuvre Les Fleurs du Mal de Baudelaire","title":"glitter for dataBNF","text":"","code":"fleurs_du_mal=\"<http://data.bnf.fr/ark:/12148/cb11947965f>\"   tib=spq_init() %>%    spq_add(\"{fleurs_du_mal} foaf:focus ?Oeuvre\") %>%    spq_add(\"?edition rdarelationships:workManifested ?Oeuvre\") %>%    spq_add(\"?edition dcterms:date ?date\", required=FALSE) %>%    spq_add(\"?edition dcterms:title ?titre\") %>%    spq_add(\"?edition dcterms:publisher ?editeur\") %>%    spq_head(n=10) %>%    spq_prefix() %>%    spq_perform(\"dataBNF\")   knitr::kable(tib)"},{"path":"https://lvaudor.github.io/glitter/articles/glitter_for_dataBNF.html","id":"lien-à-un-document-numérisé-dans-galliga","dir":"Articles","previous_headings":"","what":"Lien à un document numérisé dans Galliga","title":"glitter for dataBNF","text":"","code":"doc=\"<http://data.bnf.fr/ark:/12148/cb42712156j#about>\"  tib=spq_init() %>%    spq_add(\"{doc} rdarelationships:electronicReproduction ?URLGallica\") %>%    spq_add(\"{doc} dcterms:title ?title\") %>%    spq_prefix() %>%   spq_perform(endpoint=\"dataBNF\")  knitr::kable(tib)"},{"path":"https://lvaudor.github.io/glitter/articles/glitter_for_dataBNF.html","id":"expositions-virtuelles-de-la-bnf","dir":"Articles","previous_headings":"","what":"Expositions virtuelles de la BNF","title":"glitter for dataBNF","text":"","code":"expo=\"<http://data.bnf.fr/ontology/bnf-onto/ExpositionVirtuelle>\"  tib=spq_init() %>%    spq_add(\"?exposition a {expo}\") %>%    spq_add(\"?exposition dcterms:title ?titre\") %>%    spq_add(\"?exposition dcterms:subject ?sujet\") %>%    spq_head(n=30) %>%    spq_perform(endpoint=\"dataBNF\")  knitr::kable(tib)"},{"path":"https://lvaudor.github.io/glitter/articles/glitter_for_dataBNF.html","id":"retrouver-un-nom-de-personne-à-partir-dun-isni","dir":"Articles","previous_headings":"","what":"Retrouver un nom de personne à partir d’un ISNI","title":"glitter for dataBNF","text":"","code":"tib=spq_init() %>%    spq_add(\"?person isni:identifierValid '0000000121012885'\") %>%    spq_add(\"?person foaf:focus ?identity\") %>%    spq_add(\"?identity foaf:familyName ?nom\") %>%    spq_add(\"?identity foaf:givenName ?prenom\") %>%    spq_perform(endpoint=\"dataBNF\")  knitr::kable(tib)"},{"path":"https://lvaudor.github.io/glitter/articles/glitter_for_dataBNF.html","id":"identifiant-ark-dune-notice-à-partir-du-numéro-frbnf","dir":"Articles","previous_headings":"","what":"Identifiant ARK d’une notice à partir du numéro FRBNF","title":"glitter for dataBNF","text":"","code":"tib=spq_init() %>%    spq_add(\"?pidArk bnf-onto:FRBNF '11992081'^^xsd:integer\") %>%    spq_head(n=10) %>%    spq_perform(e=\"dataBNF\")  knitr::kable(tib)"},{"path":"https://lvaudor.github.io/glitter/articles/glitter_for_dataBNF.html","id":"retrouver-une-oeuvre-à-partir-dun-isbn","dir":"Articles","previous_headings":"","what":"Retrouver une oeuvre à partir d’un ISBN","title":"glitter for dataBNF","text":"","code":"tib=spq_init() %>%    spq_add(\"?work rdfs:label ?title\") %>%    spq_add(\"?work dcterms:creator ?creator\") %>%    spq_add(\"?manifestation bnf-onto:isbn '2-7028-4777-3'\") %>%    spq_add(\"?manifestation rdarelationships:workManifested ?work\") %>%    spq_add(\"?creator foaf:name ?name\") %>%    spq_head(n=10) %>%    spq_perform(e=\"dataBNF\")  knitr::kable(tib)"},{"path":"https://lvaudor.github.io/glitter/articles/glitter_for_dataBNF.html","id":"tous-les-auteurs-morts-avant-1924","dir":"Articles","previous_headings":"","what":"Tous les auteurs morts avant 1924","title":"glitter for dataBNF","text":"","code":"tib=spq_init() %>%    spq_add(\"?oeuvre dcterms:creator ?auteur\") %>%    spq_add(\"?auteur bio:death ?mort\") %>%    spq_add(\"?auteur foaf:familyName ?nom\") %>%   spq_filter(as.integer(mort) < as.integer('1924')) %>%    spq_group_by(auteur, nom, mort) %>%    spq_arrange(desc(as.integer(mort))) %>%    spq_head(n=10) %>%    spq_perform(e=\"dataBNF\")  knitr::kable(tib)"},{"path":"https://lvaudor.github.io/glitter/articles/glitter_for_dataBNF.html","id":"images-dans-data-bnf-fr","dir":"Articles","previous_headings":"","what":"Images dans data.bnf.fr","title":"glitter for dataBNF","text":"","code":"tib=spq_add(t=\"?image dcterms:type <http://purl.org/dc/dcmitype/StillImage>\") %>%   spq_head(n=10) %>%    spq_perform(e=\"dataBNF\")  knitr::kable(tib)"},{"path":"https://lvaudor.github.io/glitter/articles/glitter_for_dataBNF.html","id":"ouvrages-adaptés-pour-la-jeunesse","dir":"Articles","previous_headings":"","what":"Ouvrages adaptés pour la jeunesse","title":"glitter for dataBNF","text":"","code":"tib=spq_init() %>%    spq_add(\"?manifestation bnf-onto:ouvrageJeunesse 'true'^^xsd:boolean\") %>%    spq_add(\". rdarelationships:workManifested ?oeuvre\") %>%    spq_add(\". rdfs:seeAlso ?uri\") %>%    spq_group_by(uri, oeuvre) %>%    spq_head(n=10) %>%    spq_perform(e=\"dataBNF\")  knitr::kable(tib)"},{"path":"https://lvaudor.github.io/glitter/articles/glitter_for_dataBNF.html","id":"portraits-dauteur-issus-de-gallica","dir":"Articles","previous_headings":"","what":"Portraits d’auteur, issus de Gallica","title":"glitter for dataBNF","text":"","code":"tib=spq_init() %>%    spq_add(\"?auteur rdf:type skos:Concept\") %>%    spq_add(\". foaf:focus ?person\") %>%    spq_add(\"?doc rdarelationships:electronicReproduction ?url\") %>%    spq_add(\". dcterms:subject ?auteur\") %>%    spq_add(\". dcterms:subject <http://data.bnf.fr/ark:/12148/cb11932843f>\") %>%    spq_head(n=10) %>%    spq_group_by(auteur, url) %>%    spq_perform(e=\"dataBNF\")  knitr::kable(tib)"},{"path":"https://lvaudor.github.io/glitter/articles/glitter_for_dataBNF.html","id":"termes-spécifiques-dun-sujet-rameau","dir":"Articles","previous_headings":"","what":"Termes spécifiques d’un sujet (RAMEAU)","title":"glitter for dataBNF","text":"","code":"tib=spq_init() %>%    spq_add(\"?sujet1 skos:prefLabel ?label\") %>%    spq_add(\". skos:narrower ?uri2\") %>%    spq_add(\"?uri2 skos:prefLabel ?label2\") %>%    spq_add(\"?uri2 skos:narrower ?uri3\", required=FALSE) %>%    spq_add(\"?uri3 skos:prefLabel ?label3\", required=FALSE) %>%    spq_head(n=10) %>%    spq_perform(e=\"dataBNF\")  knitr::kable(tib)"},{"path":"https://lvaudor.github.io/glitter/articles/glitter_for_dataBNF.html","id":"sujets-rameau-de-type-nom-commun","dir":"Articles","previous_headings":"","what":"Sujets RAMEAU de type nom commun","title":"glitter for dataBNF","text":"","code":"tib=spq_init() %>%    spq_add(\"?sujet dcterms:isPartOf <http://data.bnf.fr/vocabulary/rameau/r166>\") %>%    spq_add(\". skos:prefLabel ?label\") %>%    spq_head(n=10) %>%    spq_perform(e=\"dataBNF\")  knitr::kable(tib)"},{"path":"https://lvaudor.github.io/glitter/articles/glitter_for_dataBNF.html","id":"alignement-entre-les-sujets-rameau-et-lieux","dir":"Articles","previous_headings":"","what":"Alignement entre les sujets RAMEAU et lieux","title":"glitter for dataBNF","text":"","code":"tib=spq_init() %>%    spq_add(\"?c a <http://www.w3.org/2003/01/geo/wgs84_pos#SpatialThing>\") %>%    spq_add(\"?lieu foaf:focus ?c\") %>%    spq_add(\"?lieu skos:closeMatch ?concept\") %>%    spq_group_by(lieu, concept , c) %>%    spq_head(n=100) %>%    spq_perform(e=\"dataBNF\")  knitr::kable(tib)"},{"path":"https://lvaudor.github.io/glitter/articles/glitter_for_dataBNF.html","id":"liens-vers-wikipedia-pour-les-auteurs","dir":"Articles","previous_headings":"","what":"Liens vers wikipedia pour les auteurs","title":"glitter for dataBNF","text":"","code":"tib=spq_init() %>%    spq_add(\"?ConceptA foaf:focus ?auteur\") %>%    spq_add(\"?oeuvre dcterms:creator ?auteur\") %>%    spq_add(\"?ConceptA rdfs:seeAlso ?wikipedia\") %>%    spq_filter(str_detect(wikipedia,'wikipedia')) %>%    spq_head(n=10) %>%    spq_perform(e=\"dataBNF\")  knitr::kable(tib)"},{"path":"https://lvaudor.github.io/glitter/articles/glitter_for_hal.html","id":"recherche-par-document","dir":"Articles","previous_headings":"","what":"Recherche par document","title":"glitter for HAL","text":"s’intéresse à ce document: haldoc:inria-00362381.","code":""},{"path":"https://lvaudor.github.io/glitter/articles/glitter_for_hal.html","id":"rechercher-toutes-les-informations-associées-à-ce-document","dir":"Articles","previous_headings":"Recherche par document","what":"Rechercher toutes les informations associées à ce document","title":"glitter for HAL","text":"","code":"tib_info=spq_init() %>%    spq_add(\"haldoc:inria-00362381 dcterms:hasVersion ?version\") %>% # Ce doc a des versions ?version   spq_add(\"?version ?p ?object\") %>%                               # ?version a des prop. ?p les liant à ?object   spq_perform(e=\"hal\")  head(tib_info) ## # A tibble: 6 × 3 ##   version                                                     p           object ##   <chr>                                                       <chr>       <chr>  ## 1 https://data.archives-ouvertes.fr/document/inria-00362381v1 http://www… http:… ## 2 https://data.archives-ouvertes.fr/document/inria-00362381v1 http://pur… NA     ## 3 https://data.archives-ouvertes.fr/document/inria-00362381v1 http://pur… NA     ## 4 https://data.archives-ouvertes.fr/document/inria-00362381v1 http://pur… https… ## 5 https://data.archives-ouvertes.fr/document/inria-00362381v1 http://pur… inria… ## 6 https://data.archives-ouvertes.fr/document/inria-00362381v1 http://pur… 22"},{"path":"https://lvaudor.github.io/glitter/articles/glitter_for_hal.html","id":"rechercher-luri-le-titre-le-lien-vers-le-pdf-et-les-auteurs-de-toutes-les-versions-de-ce-document","dir":"Articles","previous_headings":"Recherche par document","what":"Rechercher l’URI, le titre, le lien vers le PDF et les auteurs de [toutes les versions de] ce document","title":"glitter for HAL","text":"Remarque: peut concaténer les réponses d’une variable (ici les auteurs par exemple): peut également agréger/résumer les résultats renvoyés par la requête, par exemple en recherchant le nombre d’auteurs d’un document (par version)","code":"query_doc = spq_init() %>%    spq_add(\"haldoc:inria-00362381 dcterms:hasVersion ?version\") %>% # Ce doc a des versions ?version   spq_add(\"?version dcterms:title ?title\") %>%                     # ?version a pour titre ?titre   spq_add(\". dcterms:creator ?creator\") %>%                        # ...... et pour créateur ?creator   spq_add(\". ore:aggregates ?pdf\") %>%                             # ...... et ce lien vers un ?pdf   spq_add(\"?creator hal:person ?person\") %>%                       # ?creator est une personne ?person   spq_add(\"?person foaf:name ?name\")                               # ?person a pour nom ?name  tib_doc=spq_perform(query_doc,\"hal\")  tib_doc ## # A tibble: 5 × 6 ##   version                                       title creator pdf   person name  ##   <chr>                                         <chr> <chr>   <chr> <chr>  <chr> ## 1 https://data.archives-ouvertes.fr/document/i… Quer… nodeID… http… https… Oliv… ## 2 https://data.archives-ouvertes.fr/document/i… Quer… nodeID… http… https… Leil… ## 3 https://data.archives-ouvertes.fr/document/i… Quer… nodeID… http… https… Fabi… ## 4 https://data.archives-ouvertes.fr/document/i… Quer… nodeID… http… https… Hacè… ## 5 https://data.archives-ouvertes.fr/document/i… Quer… nodeID… http… https… Khal… query_doc_autConcat = query_doc %>%    spq_group_by(version, title,pdf) %>%             # Groupe les résultats par ?version, ?title, ?pdf   spq_summarise(authors = str_c(name, sep = ', '))      # Concatène les noms d'auteur dans ?authors  tib_doc_autConcat = spq_perform(query_doc_autConcat,\"hal\")  tib_doc_autConcat ## # A tibble: 1 × 4 ##   version                                                    title pdf   authors ##   <chr>                                                      <chr> <chr> <chr>   ## 1 https://data.archives-ouvertes.fr/document/inria-00362381… Quer… http… Olivie… tib_nbAutDoc=spq_init() %>%    spq_add(\"haldoc:inria-00362381 dcterms:hasVersion ?version\") %>% # Ce doc a des versions ?version   spq_add(\"?version dcterms:creator ?creator\") %>%                 # ?version a pour créateur ?creator   spq_add(\"?creator hal:person ?person\") %>%                       # ?creator est une personne ?person   spq_group_by(version) %>%                                     # Groupe par ?version   spq_summarise(nbperson = n(unique(person))) %>%      # Résume: ?nbperson = nb de ?person dist.     spq_perform(e=\"hal\")  tib_nbAutDoc ## # A tibble: 1 × 2 ##   version                                                     nbperson ##   <chr>                                                       <chr>    ## 1 https://data.archives-ouvertes.fr/document/inria-00362381v1 5"},{"path":"https://lvaudor.github.io/glitter/articles/glitter_for_hal.html","id":"rechercher-luri-et-les-types-et-létiquette-associée-de-toutes-les-versions-de-ce-document","dir":"Articles","previous_headings":"Recherche par document","what":"Rechercher l’URI et les types (et l’étiquette associée) de [toutes les versions de] ce document","title":"glitter for HAL","text":"cherche les types associés aux versions de documents. Ces types sont associés à des étiquettes (dans plusieurs langues) qui permettent de comprendre de quoi il s’agit “en langage ordinaire”. peut filtrer les résultats pour n’afficher que la ligne de résultats pour laquelle l’étiquette est en français :","code":"query_docType=spq_init() %>%    spq_add(\"haldoc:inria-00362381 dcterms:hasVersion ?version\") %>% # Ce doc a des versions ?version   spq_add(\"?version dcterms:type ?type\") %>%                       # ?version est un document de type ?type   spq_add(\"?type skos:prefLabel ?label\")                           # ?type a pour étiquette ?label  tib_docType=spq_perform(query_docType,\"hal\")  tib_docType ## # A tibble: 2 × 3 ##   version                                                     type         label ##   <chr>                                                       <chr>        <chr> ## 1 https://data.archives-ouvertes.fr/document/inria-00362381v1 https://dat… Rapp… ## 2 https://data.archives-ouvertes.fr/document/inria-00362381v1 https://dat… Repo… query_docTypeFr=query_docType %>%    spq_filter(lang(label) == 'fr')     # Filtre pour garder les étiquettes en français  tib_docTypeFr=spq_perform(query_docTypeFr,\"hal\")  tib_docTypeFr ## # A tibble: 1 × 3 ##   version                                                     type         label ##   <chr>                                                       <chr>        <chr> ## 1 https://data.archives-ouvertes.fr/document/inria-00362381v1 https://dat… Rapp…"},{"path":[]},{"path":"https://lvaudor.github.io/glitter/articles/glitter_for_hal.html","id":"afficher-les-documents-associés-à-une-forme-auteur","dir":"Articles","previous_headings":"Recherche par forme-auteur","what":"Afficher les documents associés à une forme-auteur","title":"glitter for HAL","text":"Considérons une des “forme-auteur” de Fabien Gandon, https://data.archives-ouvertes.fr/author/827904 (vu dans les résultats des requêtes précédentes).","code":"fabien_gandon=\"<https://data.archives-ouvertes.fr/author/827904>\" # fabien_gandon = cette forme auteur  query_foAut=spq_init() %>%    spq_add(\"?document dcterms:hasVersion ?version\") %>%  # ?document a des versions ?version   spq_add(\"?version dcterms:creator ?creator\") %>%      # ?version a pour créateur ?creator   spq_add(\"?creator hal:person {fabien_gandon}\") %>%    # ?creator est fabien_gandon ({déf. de l'objet dans R})   spq_add(\"?version dcterms:type ?type\") %>%            # ?version a pour type ?type   spq_add(\"?type skos:prefLabel ?label\") %>%            # ?type a pour étiquette ?label   spq_filter(lang(label) == 'fr')                       # Filtre pour garder les ?label en français tib_foAut=spq_perform(query_foAut,\"hal\")  head(tib_foAut) ## # A tibble: 6 × 5 ##   document                                           version creator type  label ##   <chr>                                              <chr>   <chr>   <chr> <chr> ## 1 https://data.archives-ouvertes.fr/document/tel-00… https:… nodeID… http… HDR   ## 2 https://data.archives-ouvertes.fr/document/hal-01… https:… nodeID… http… Arti… ## 3 https://data.archives-ouvertes.fr/document/hal-01… https:… nodeID… http… Comm… ## 4 https://data.archives-ouvertes.fr/document/hal-01… https:… nodeID… http… Comm… ## 5 https://data.archives-ouvertes.fr/document/hal-01… https:… nodeID… http… Chap… ## 6 https://data.archives-ouvertes.fr/document/hal-01… https:… nodeID… http… Comm…"},{"path":"https://lvaudor.github.io/glitter/articles/glitter_for_hal.html","id":"enrichirsimplifier-la-requête","dir":"Articles","previous_headings":"Recherche par forme-auteur","what":"Enrichir/simplifier la requête","title":"glitter for HAL","text":"peut résumer les résultats requêtés par exemple en affichant le nombre de documents par type (et étiquette associée): peut afficher ces résultats en ordonnant les lignes selon le nombre de documents décroissant: peut également s’intéresser aux dates de publication. Par exemple ici, récupère la date de publication, l’année correspondante, et résume l’information en calculant le nombre de documents par année.","code":"query_foAutNbDoc=query_foAut %>%    spq_group_by(type, label) %>%                      # Groupe par ?type et ?label   spq_summarise(nbdoc = n(unique(document)))      tib_foAutNbDoc=spq_perform(query_foAutNbDoc,\"hal\")  tib_foAutNbDoc ## # A tibble: 12 × 3 ##    type                                                       label        nbdoc ##    <chr>                                                      <chr>        <chr> ##  1 https://data.archives-ouvertes.fr/doctype/Hdr              HDR          1     ##  2 https://data.archives-ouvertes.fr/doctype/Article          Article dan… 31    ##  3 https://data.archives-ouvertes.fr/doctype/Other            Autre publi… 5     ##  4 https://data.archives-ouvertes.fr/doctype/DoctoralThesis   Thèse        1     ##  5 https://data.archives-ouvertes.fr/doctype/ConferencePoster Poster       13    ##  6 https://data.archives-ouvertes.fr/doctype/Report           Rapport      15    ##  7 https://data.archives-ouvertes.fr/doctype/Chapter          Chapitre d'… 12    ##  8 https://data.archives-ouvertes.fr/doctype/ConferencePaper  Communicati… 172   ##  9 https://data.archives-ouvertes.fr/doctype/Douv             Direction d… 11    ## 10 https://data.archives-ouvertes.fr/doctype/Preprint         Pré-publica… 2     ## 11 https://data.archives-ouvertes.fr/doctype/Presconf         Document as… 2     ## 12 https://data.archives-ouvertes.fr/doctype/Ouv              Ouvrage (y … 3 query_foAutNbDocOrd=query_foAutNbDoc%>%    spq_arrange(desc(nbdoc))        # Ordonne par ordre décroissant de ?nbdoc  tib_foAutNbDocOrd=spq_perform(query_foAutNbDocOrd,\"hal\")  tib_foAutNbDocOrd ## # A tibble: 12 × 3 ##    type                                                       label        nbdoc ##    <chr>                                                      <chr>        <chr> ##  1 https://data.archives-ouvertes.fr/doctype/ConferencePaper  Communicati… 172   ##  2 https://data.archives-ouvertes.fr/doctype/Article          Article dan… 31    ##  3 https://data.archives-ouvertes.fr/doctype/Report           Rapport      15    ##  4 https://data.archives-ouvertes.fr/doctype/ConferencePoster Poster       13    ##  5 https://data.archives-ouvertes.fr/doctype/Chapter          Chapitre d'… 12    ##  6 https://data.archives-ouvertes.fr/doctype/Douv             Direction d… 11    ##  7 https://data.archives-ouvertes.fr/doctype/Other            Autre publi… 5     ##  8 https://data.archives-ouvertes.fr/doctype/Ouv              Ouvrage (y … 3     ##  9 https://data.archives-ouvertes.fr/doctype/Preprint         Pré-publica… 2     ## 10 https://data.archives-ouvertes.fr/doctype/Presconf         Document as… 2     ## 11 https://data.archives-ouvertes.fr/doctype/Hdr              HDR          1     ## 12 https://data.archives-ouvertes.fr/doctype/DoctoralThesis   Thèse        1 tib_dat=spq_init() %>%    spq_add(\"?document dcterms:hasVersion ?version\") %>%    spq_add(\"?version dcterms:creator ?creator\") %>%   spq_add(\". dcterms:issued ?date\") %>%                      # ?version est sortie à ?date   spq_add(\"?creator hal:person {fabien_gandon}\") %>%    spq_mutate(year = year(date)) %>%                    # Crée ?year = année de ?date   spq_group_by(year) %>%                               # Groupe par ?year   spq_summarise(nbdoc = n(unique(document))) %>%    spq_arrange(year) %>%    spq_perform(e=\"hal\")  tib_dat ## # A tibble: 24 × 2 ##    year  nbdoc ##    <chr> <chr> ##  1 1999  1     ##  2 2000  3     ##  3 2001  5     ##  4 2002  11    ##  5 2003  6     ##  6 2004  7     ##  7 2005  7     ##  8 2006  9     ##  9 2007  5     ## 10 2008  9     ## # … with 14 more rows"},{"path":"https://lvaudor.github.io/glitter/articles/glitter_for_hal.html","id":"recherche-par-auteur","dir":"Articles","previous_headings":"","what":"Recherche par auteur","title":"glitter for HAL","text":"Une personne=un IdHAL=plusieurs formes-auteur","code":""},{"path":"https://lvaudor.github.io/glitter/articles/glitter_for_hal.html","id":"afficher-les-uris-de-toutes-les-formes-auteur-associées-à-la-forme-fabien-gandon-via-lidhal","dir":"Articles","previous_headings":"Recherche par auteur","what":"Afficher les URIs de toutes les formes-auteur associées à la forme « Fabien Gandon » via l’IdHAL","title":"glitter for HAL","text":"","code":"query_aut=spq_init() %>%    spq_add(\"{fabien_gandon} ore:isAggregatedBy ?o\") %>% # {fabien gandon} correspond à ?o   spq_add(\"?forme ore:isAggregatedBy ?o\")              # ?forme correspond à ?o  tib_aut=spq_perform(query_aut,\"hal\")  tib_aut ## # A tibble: 9 × 2 ##   o                                                      forme                   ##   <chr>                                                  <chr>                   ## 1 https://data.archives-ouvertes.fr/author/fabien-gandon https://data.archives-… ## 2 https://data.archives-ouvertes.fr/author/fabien-gandon https://data.archives-… ## 3 https://data.archives-ouvertes.fr/author/fabien-gandon https://data.archives-… ## 4 https://data.archives-ouvertes.fr/author/fabien-gandon https://data.archives-… ## 5 https://data.archives-ouvertes.fr/author/fabien-gandon https://data.archives-… ## 6 https://data.archives-ouvertes.fr/author/fabien-gandon https://data.archives-… ## 7 https://data.archives-ouvertes.fr/author/fabien-gandon https://data.archives-… ## 8 https://data.archives-ouvertes.fr/author/fabien-gandon https://data.archives-… ## 9 https://data.archives-ouvertes.fr/author/fabien-gandon https://data.archives-…"},{"path":"https://lvaudor.github.io/glitter/articles/glitter_for_hal.html","id":"enrichirrésumer-les-données","dir":"Articles","previous_headings":"Recherche par auteur","what":"Enrichir/résumer les données","title":"glitter for HAL","text":"… en comptant le nombre de documents par année:","code":"query_autNbDocYear=query_aut %>%    spq_add(\"?version dcterms:creator ?creator\") %>%      # ?version a pour créateur ?creator   spq_add(\"?creator hal:person ?forme\") %>%             # ?creator est une personne ?forme   spq_add(\"?version dcterms:issued ?date\") %>%          # ?version a été publié à ?date   spq_add(\"?document dcterms:hasVersion ?version\") %>%  # ?document a pour versions ?version   spq_mutate(year = year(date)) %>%              # Ajoute ?year qui correspond à l'année de ?date   spq_group_by(year) %>%                          # Groupe par ?year   spq_arrange(year) %>%                              # Ordonne par ordre décroissant de ?year   spq_summarise(nbdoc = n(unique(document)))  tib_autNbDocYear=spq_perform(query_autNbDocYear,\"hal\")  tib_autNbDocYear ## # A tibble: 24 × 2 ##    year  nbdoc ##    <chr> <chr> ##  1 1999  1     ##  2 2000  3     ##  3 2001  5     ##  4 2002  11    ##  5 2003  6     ##  6 2004  7     ##  7 2005  7     ##  8 2006  9     ##  9 2007  5     ## 10 2008  9     ## # … with 14 more rows"},{"path":"https://lvaudor.github.io/glitter/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Lise Vaudor. Author, maintainer.","code":""},{"path":"https://lvaudor.github.io/glitter/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Vaudor L (2022). glitter: glitter makes SPARQL. https://lvaudor.github.io/glitter/, https://github.com/lvaudor/glitter.","code":"@Manual{,   title = {glitter: glitter makes SPARQL},   author = {Lise Vaudor},   year = {2022},   note = {https://lvaudor.github.io/glitter/, https://github.com/lvaudor/glitter}, }"},{"path":"https://lvaudor.github.io/glitter/index.html","id":"glitter-","dir":"","previous_headings":"","what":"glitter makes SPARQL","title":"glitter makes SPARQL","text":"DSL SPARQL R. ✨ glitter produces sparkle SPARQL! ✨ package aims writing sending SPARQL queries without knowledge SPARQL language syntax. makes exploration use Linked Open Data (Wikidata particular) easier know SPARQL. Install packages :","code":"install.packages(\"remotes\") #if remotes is not already installed remotes::install_github(\"lvaudor/glitter\")"},{"path":"https://lvaudor.github.io/glitter/index.html","id":"documentation","dir":"","previous_headings":"","what":"Documentation","title":"glitter makes SPARQL","text":"can access documentation regarding package glitter pkgdown website.","code":""},{"path":"https://lvaudor.github.io/glitter/reference/build_graph_classes.html","id":null,"dir":"Reference","previous_headings":"","what":"Build the graph of sub/superclasses — build_graph_classes","title":"Build the graph of sub/superclasses — build_graph_classes","text":"Build graph sub/superclasses","code":""},{"path":"https://lvaudor.github.io/glitter/reference/build_graph_classes.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Build the graph of sub/superclasses — build_graph_classes","text":"","code":"build_graph_classes(id)"},{"path":"https://lvaudor.github.io/glitter/reference/build_graph_classes.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Build the graph of sub/superclasses — build_graph_classes","text":"id id class","code":""},{"path":"https://lvaudor.github.io/glitter/reference/build_graph_classes.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Build the graph of sub/superclasses — build_graph_classes","text":"","code":"if (FALSE) { tib_g=build_graph_classes(\"wd:Q627272\") }"},{"path":"https://lvaudor.github.io/glitter/reference/build_part_body.html","id":null,"dir":"Reference","previous_headings":"","what":"Builds the ","title":"Builds the ","text":"Builds \"body\" part query.","code":""},{"path":"https://lvaudor.github.io/glitter/reference/build_part_body.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Builds the ","text":"","code":"build_part_body(   query = NA,   subject,   verb,   object,   required = TRUE,   within_box = c(NA, NA),   within_distance = c(NA, NA) )"},{"path":"https://lvaudor.github.io/glitter/reference/build_part_body.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Builds the ","text":"query list elements query subject anonymous variable (instance, default, \"?subject\") item (instance \"wd:Q456\")) verb property (instance \"wdt:P190\") object anonymous variable (instance, default, \"?object\") item (instance \"wd:Q456\")) required whether existence value triplet required (defaults TRUE). set FALSE, triplets query returned even particular triplet missing) within_box provided, north-west south-east coordinates bounding box triplet query. within_distance provided, north-west south-east coordinates bounding box triplet query.","code":""},{"path":"https://lvaudor.github.io/glitter/reference/build_part_select.html","id":null,"dir":"Reference","previous_headings":"","what":"Builds the ","title":"Builds the ","text":"Builds \"select\" part query.","code":""},{"path":"https://lvaudor.github.io/glitter/reference/build_part_select.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Builds the ","text":"","code":"build_part_select(   query = NULL,   subject = NULL,   verb = NULL,   object = NULL,   label = NA )"},{"path":"https://lvaudor.github.io/glitter/reference/build_part_select.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Builds the ","text":"query list elements query subject anonymous variable (instance, default, \"?subject\") item (instance \"wd:Q456\")) verb property (instance \"wdt:P190\") object anonymous variable (instance, default, \"?object\") item (instance \"wd:Q456\")) label whether get label associated mentioned item","code":""},{"path":"https://lvaudor.github.io/glitter/reference/clean_wikidata_table.html","id":null,"dir":"Reference","previous_headings":"","what":"Clean Wikidata results by removing the ","title":"Clean Wikidata results by removing the ","text":"Clean Wikidata results removing \"http://www.wikidata.org/entity/\" prefix columns","code":""},{"path":"https://lvaudor.github.io/glitter/reference/clean_wikidata_table.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Clean Wikidata results by removing the ","text":"","code":"clean_wikidata_table(wikitib)"},{"path":"https://lvaudor.github.io/glitter/reference/clean_wikidata_table.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Clean Wikidata results by removing the ","text":"wikitib Wikidata results tibble","code":""},{"path":"https://lvaudor.github.io/glitter/reference/clean_wikidata_table.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Clean Wikidata results by removing the ","text":"","code":"metro_query='SELECT ?item ?itemLabel ?coords {  ?item wdt:P361 wd:Q1552;  wdt:P625 ?coords .  SERVICE wikibase:label { bd:serviceParam wikibase:language \"en\" . } } ORDER BY ?itemLabel ' tib=send_sparql(query=metro_query) clean_tib=clean_wikidata_table(tib) clean_tib %>% head() #> # A tibble: 6 × 3 #>   item         itemLabel                  coords                      #>   <chr>        <chr>                      <chr>                       #> 1 wd:Q55598901 Q55598901                  Point(4.8041 45.71409)      #> 2 wd:Q56300135 Q56300135                  Point(4.8049 45.6966)       #> 3 wd:Q2186663  Ampère - Victor Hugo       Point(4.829182 45.753023)   #> 4 wd:Q5298     Bellecour                  Point(4.83405 45.757958333) #> 5 wd:Q1930833  Brotteaux                  Point(4.859433 45.767164)   #> 6 wd:Q2561831  Charpennes - Charles Hernu Point(4.863119 45.770539)"},{"path":"https://lvaudor.github.io/glitter/reference/count_items.html","id":null,"dir":"Reference","previous_headings":"","what":"Get counts of items directly in classes — count_items","title":"Get counts of items directly in classes — count_items","text":"Get counts items directly classes","code":""},{"path":"https://lvaudor.github.io/glitter/reference/count_items.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get counts of items directly in classes — count_items","text":"","code":"count_items(classes)"},{"path":"https://lvaudor.github.io/glitter/reference/count_items.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get counts of items directly in classes — count_items","text":"classes vector wikidata classes","code":""},{"path":"https://lvaudor.github.io/glitter/reference/count_items.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get counts of items directly in classes — count_items","text":"","code":"classes=c(\"wd:Q627272\",\"wd:Q99527517\") count_items(classes) #> [1] 247   0"},{"path":"https://lvaudor.github.io/glitter/reference/decompose_triplet.html","id":null,"dir":"Reference","previous_headings":"","what":"Get elements subject, verb, object of a triplet as a list. — decompose_triplet","title":"Get elements subject, verb, object of a triplet as a list. — decompose_triplet","text":"Get elements subject, verb, object triplet list.","code":""},{"path":"https://lvaudor.github.io/glitter/reference/decompose_triplet.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get elements subject, verb, object of a triplet as a list. — decompose_triplet","text":"","code":"decompose_triplet(triplet, subject, verb, object)"},{"path":"https://lvaudor.github.io/glitter/reference/decompose_triplet.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get elements subject, verb, object of a triplet as a list. — decompose_triplet","text":"triplet triplet statement (replaces arguments subject verb object) subject anonymous variable (instance, default, \"?subject\") item (instance \"wd:Q456\")) verb property (instance \"wdt:P190\") object anonymous variable (instance, default, \"?object\") item (instance \"wd:Q456\"))","code":""},{"path":"https://lvaudor.github.io/glitter/reference/get_claim.html","id":null,"dir":"Reference","previous_headings":"","what":"Get claims regarding one Wikidata thing — get_claim","title":"Get claims regarding one Wikidata thing — get_claim","text":"Get claims regarding one Wikidata thing","code":""},{"path":"https://lvaudor.github.io/glitter/reference/get_claim.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get claims regarding one Wikidata thing — get_claim","text":"","code":"get_claim(id, property_name = \"wd:P31\")"},{"path":"https://lvaudor.github.io/glitter/reference/get_claim.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get claims regarding one Wikidata thing — get_claim","text":"id Wikidata ID, either item (\"Qxxxxx\") property (\"Pxxxxx\"), item . property_name name property get","code":""},{"path":"https://lvaudor.github.io/glitter/reference/get_claim.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get claims regarding one Wikidata thing — get_claim","text":"","code":"get_claim(\"wd:Q188743\", \"wd:P625\") #> # A tibble: 1 × 7 #>   property propertyLabel value          valueLabel propertyType propertyDescrip… #>   <chr>    <chr>         <chr>          <chr>      <chr>        <chr>            #> 1 wd:P625  NA            Point(0.22555… Point(0.2… NA           NA               #> # … with 1 more variable: propertyAltLabel <chr>"},{"path":"https://lvaudor.github.io/glitter/reference/get_claims.html","id":null,"dir":"Reference","previous_headings":"","what":"Get claims regarding one Wikidata thing — get_claims","title":"Get claims regarding one Wikidata thing — get_claims","text":"Get claims regarding one Wikidata thing","code":""},{"path":"https://lvaudor.github.io/glitter/reference/get_claims.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get claims regarding one Wikidata thing — get_claims","text":"","code":"get_claims(id, with_labels = FALSE)"},{"path":"https://lvaudor.github.io/glitter/reference/get_claims.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get claims regarding one Wikidata thing — get_claims","text":"id Wikidata ID, either item (\"wd:Qxxxxx\") property (\"wdt:Pxxxxx\"), item . with_labels Whether keep labels (Boolean)","code":""},{"path":"https://lvaudor.github.io/glitter/reference/get_claims.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get claims regarding one Wikidata thing — get_claims","text":"","code":"get_claims(\"wd:Q431603\") #> # A tibble: 24 × 7 #>    property         propertyLabel value valueLabel propertyType propertyDescrip… #>    <chr>            <chr>         <chr> <chr>      <chr>        <chr>            #>  1 http://www.wiki… NA            4120… 4120500-5  NA           NA               #>  2 http://www.wiki… NA            sh85… sh85106541 NA           NA               #>  3 http://www.wiki… NA            http… organizat… NA           NA               #>  4 http://www.wiki… NA            http… non-gover… NA           NA               #>  5 http://www.wiki… NA            http… lobbying   NA           NA               #>  6 http://www.wiki… NA            Advo… Advocacy … NA           NA               #>  7 http://www.wiki… NA            /m/0… /m/03tp2y  NA           NA               #>  8 http://www.wiki… NA            http… Category:… NA           NA               #>  9 http://www.wiki… NA            http… trade ass… NA           NA               #> 10 http://www.wiki… NA            topi… topic/int… NA           NA               #> # … with 14 more rows, and 1 more variable: propertyAltLabel <chr>"},{"path":"https://lvaudor.github.io/glitter/reference/get_description.html","id":null,"dir":"Reference","previous_headings":"","what":"Get description of Wikidata thing — get_description","title":"Get description of Wikidata thing — get_description","text":"Get description Wikidata thing","code":""},{"path":"https://lvaudor.github.io/glitter/reference/get_description.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get description of Wikidata thing — get_description","text":"","code":"get_description(id, language = \"en\")"},{"path":"https://lvaudor.github.io/glitter/reference/get_description.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get description of Wikidata thing — get_description","text":"id Wikidata ID, either item (\"Qxxxxx\") property (\"Pxxxxx\"), item . language language description, defaults English (\"en\")","code":""},{"path":"https://lvaudor.github.io/glitter/reference/get_description.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get description of Wikidata thing — get_description","text":"","code":"get_description(\"wd:Q431603\") #> [1] \"defines and represents the interests of a particular social group or industry\" get_description(\"wd:Q431603\", language=\"es\") #> [1] \"conjunto de personas organizadas con el fin de actuar conjuntamente en defensa de un interés común\""},{"path":"https://lvaudor.github.io/glitter/reference/get_info.html","id":null,"dir":"Reference","previous_headings":"","what":"Get description of Wikidata thing — get_info","title":"Get description of Wikidata thing — get_info","text":"Get description Wikidata thing","code":""},{"path":"https://lvaudor.github.io/glitter/reference/get_info.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get description of Wikidata thing — get_info","text":"","code":"get_info(id, language = \"en\", with_labels = FALSE)"},{"path":"https://lvaudor.github.io/glitter/reference/get_info.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get description of Wikidata thing — get_info","text":"id Wikidata ID, either item (\"wd:Qxxxxx\") property (\"wd:Pxxxxx\"), item . language language description, defaults English (\"en\") with_labels Whether keep labels (Boolean)","code":""},{"path":"https://lvaudor.github.io/glitter/reference/get_info.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get description of Wikidata thing — get_info","text":"","code":"get_info(\"wd:Q431603\") #> $label #> [1] \"advocacy group\" #>  #> $description #> [1] \"defines and represents the interests of a particular social group or industry\" #>  #> $claims #> # A tibble: 24 × 7 #>    property         propertyLabel value valueLabel propertyType propertyDescrip… #>    <chr>            <chr>         <chr> <chr>      <chr>        <chr>            #>  1 http://www.wiki… NA            4120… 4120500-5  NA           NA               #>  2 http://www.wiki… NA            sh85… sh85106541 NA           NA               #>  3 http://www.wiki… NA            http… organizat… NA           NA               #>  4 http://www.wiki… NA            http… non-gover… NA           NA               #>  5 http://www.wiki… NA            http… lobbying   NA           NA               #>  6 http://www.wiki… NA            Advo… Advocacy … NA           NA               #>  7 http://www.wiki… NA            /m/0… /m/03tp2y  NA           NA               #>  8 http://www.wiki… NA            http… Category:… NA           NA               #>  9 http://www.wiki… NA            http… trade ass… NA           NA               #> 10 http://www.wiki… NA            topi… topic/int… NA           NA               #> # … with 14 more rows, and 1 more variable: propertyAltLabel <chr> #>"},{"path":"https://lvaudor.github.io/glitter/reference/get_label.html","id":null,"dir":"Reference","previous_headings":"","what":"Get label of Wikidata thing — get_label","title":"Get label of Wikidata thing — get_label","text":"Get label Wikidata thing","code":""},{"path":"https://lvaudor.github.io/glitter/reference/get_label.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get label of Wikidata thing — get_label","text":"","code":"get_label(id, language = \"en\")"},{"path":"https://lvaudor.github.io/glitter/reference/get_label.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get label of Wikidata thing — get_label","text":"id Wikidata ID, either item (\"Qxxxxx\") property (\"Pxxxxx\"), item . language language label, defaults English (\"en\")","code":""},{"path":"https://lvaudor.github.io/glitter/reference/get_label.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get label of Wikidata thing — get_label","text":"","code":"get_label(\"wd:Q431603\") #> [1] \"advocacy group\" get_label(\"wd:Q431603\", language=\"fr\") #> [1] \"groupe de défense d'intérêts\""},{"path":"https://lvaudor.github.io/glitter/reference/get_one_claim.html","id":null,"dir":"Reference","previous_headings":"","what":"Format information about one claim (for use in get_claims) — get_one_claim","title":"Format information about one claim (for use in get_claims) — get_one_claim","text":"Format information one claim (use get_claims)","code":""},{"path":"https://lvaudor.github.io/glitter/reference/get_one_claim.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Format information about one claim (for use in get_claims) — get_one_claim","text":"","code":"get_one_claim(res)"},{"path":"https://lvaudor.github.io/glitter/reference/get_one_claim.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Format information about one claim (for use in get_claims) — get_one_claim","text":"res result","code":""},{"path":"https://lvaudor.github.io/glitter/reference/get_thing.html","id":null,"dir":"Reference","previous_headings":"","what":"Get Wikidata item or property\nGet unformatted info from Wikidata based on an item or property id. — get_thing","title":"Get Wikidata item or property\nGet unformatted info from Wikidata based on an item or property id. — get_thing","text":"Get Wikidata item property Get unformatted info Wikidata based item property id.","code":""},{"path":"https://lvaudor.github.io/glitter/reference/get_thing.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get Wikidata item or property\nGet unformatted info from Wikidata based on an item or property id. — get_thing","text":"","code":"get_thing(id)"},{"path":"https://lvaudor.github.io/glitter/reference/get_thing.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get Wikidata item or property\nGet unformatted info from Wikidata based on an item or property id. — get_thing","text":"id Wikidata ID, either item (\"wd:Qxxxxx\") property (\"wd:Pxxxxx\")","code":""},{"path":"https://lvaudor.github.io/glitter/reference/get_thing.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get Wikidata item or property\nGet unformatted info from Wikidata based on an item or property id. — get_thing","text":"","code":"get_thing(\"wd:Q431603\") #>  #> \tWikidata item Q431603  #>  #> Label:\t\t advocacy group \t[55 other languages available] #> Aliases:\t 利益集团, 利益團體, 壓力團體, 倡仪团体, קבוצות אינטרס, קבוצות בעלי עניין, קבוצת בעלי עניין, קבוצת לחץ, 압력단체, Grupo de presion, Grupos de presión, Grupos de presion, grupo de interes, Surverühm, Huvigrupp, Kepentingan kelompok, Interessensvertretung, Interessensgruppen, Pressure Group, Interessensgruppe, Interessengruppe, Interessenvereinigung, Lobbyorganisation, 利益集団, インタレストグループ, 圧力団体, ロビー団体, プレッシャーグループ, 特別利益団体, λόμπι, ομάδα ειδικού ενδιαφέροντος, Grupa za pritisak, pressiegroep, belangenvereniging, группа давления, группы интересов, лоббистская организация, лоббирующая организация, Интересне групе, Baskı grupları, Lobici gruplar, گروه فشار, گروه ذی نفوذ, گروه ذینفوذ, Interesseorganisasjoner, Interessegruppe, Interesseforening, interest group, special interest group, lobbying organization, lobby group, advocacy organization, lobbying group, lobbyists, SIG, lobbying organisation, advocacy organisation, special interest organization, special interest organisation, pressure group, pressure organization, pressure organisation, groupe de défense, ініцыятыўная група, lobbyorganisation, kumpulan pengutara, kumpulan penyokong, kumpulan perakuan, kumpulan sokongan, kumpulan pengutaraan, kumpulan anjuran, edunvalvontajärjestö, etujärjestö  #> Description: defines and represents the interests of a particular social group or industry \t[11 other languages available] #> Claims:\t\t 23  #> Sitelinks:\t 42"},{"path":"https://lvaudor.github.io/glitter/reference/get_triplets.html","id":null,"dir":"Reference","previous_headings":"","what":"Get triplets with subject verb object. — get_triplets","title":"Get triplets with subject verb object. — get_triplets","text":"Get triplets subject verb object.","code":""},{"path":"https://lvaudor.github.io/glitter/reference/get_triplets.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get triplets with subject verb object. — get_triplets","text":"","code":"get_triplets(   triplet = NULL,   subject = NULL,   verb = NULL,   object = NULL,   required = TRUE,   label = NA,   limit = NULL,   within_box = c(NA, NA),   within_distance = c(NA, NA) )"},{"path":"https://lvaudor.github.io/glitter/reference/get_triplets.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get triplets with subject verb object. — get_triplets","text":"triplet triplet subject anonymous variable (instance, default, \"?subject\") item (instance \"wd:Q456\")) verb property (instance \"wdt:P190\") object anonymous variable (instance, default, \"?object\") item (instance \"wd:Q456\")) required whether require triplet (Boolean) label vector variables include label column (defaults NA) limit max number items sent back within_box provided, rectangular bounding box triplet query. Provided list(southwest=c(long=...,lat=...),northeast=c(long=...,lat=...)) within_distance provided, circular bounding box triplet query. Provided list(center=c(long=...,lat=...), radius=...), radius kilometers. center can also provided variable (instance, \"?location\") center coordinates retrieved directly query.","code":""},{"path":"https://lvaudor.github.io/glitter/reference/get_triplets.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get triplets with subject verb object. — get_triplets","text":"","code":"get_triplets(s=\"wd:Q456\",v=\"wdt:P625\",o=\"?coords\") #> # A tibble: 1 × 1 #>   coords                          #>   <chr>                           #> 1 Point(4.841388888 45.758888888) get_triplets(t=\"wd:Q456 wdt:P625 ?coords\") #> # A tibble: 1 × 1 #>   coords                          #>   <chr>                           #> 1 Point(4.841388888 45.758888888)"},{"path":"https://lvaudor.github.io/glitter/reference/pipe.html","id":null,"dir":"Reference","previous_headings":"","what":"Pipe operator — %>%","title":"Pipe operator — %>%","text":"See magrittr::%>% details.","code":""},{"path":"https://lvaudor.github.io/glitter/reference/pipe.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Pipe operator — %>%","text":"","code":"lhs %>% rhs"},{"path":"https://lvaudor.github.io/glitter/reference/send_sparql.html","id":null,"dir":"Reference","previous_headings":"","what":"Send SPARQL query to endpoint and get tibble as a result — send_sparql","title":"Send SPARQL query to endpoint and get tibble as a result — send_sparql","text":"Send SPARQL query endpoint get tibble result","code":""},{"path":"https://lvaudor.github.io/glitter/reference/send_sparql.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Send SPARQL query to endpoint and get tibble as a result — send_sparql","text":"","code":"send_sparql(query, endpoint = \"Wikidata\")"},{"path":"https://lvaudor.github.io/glitter/reference/send_sparql.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Send SPARQL query to endpoint and get tibble as a result — send_sparql","text":"query string corresponding SPARQL query endpoint string url corresponding SPARQL endpoint. Defaults \"Wikidata\"","code":""},{"path":"https://lvaudor.github.io/glitter/reference/send_sparql.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Send SPARQL query to endpoint and get tibble as a result — send_sparql","text":"","code":"metro_query='SELECT ?item ?itemLabel ?coords {  ?item wdt:P361 wd:Q1552;  wdt:P625 ?coords.  OPTIONAL{?item wdt:P1619 ?date.}  SERVICE wikibase:label { bd:serviceParam wikibase:language \"en\" . } } ORDER BY ?itemLabel ' send_sparql(query=metro_query) #> # A tibble: 46 × 3 #>    item                                     itemLabel                  coords    #>    <chr>                                    <chr>                      <chr>     #>  1 http://www.wikidata.org/entity/Q55598901 Q55598901                  Point(4.… #>  2 http://www.wikidata.org/entity/Q56300135 Q56300135                  Point(4.… #>  3 http://www.wikidata.org/entity/Q2186663  Ampère - Victor Hugo       Point(4.… #>  4 http://www.wikidata.org/entity/Q5298     Bellecour                  Point(4.… #>  5 http://www.wikidata.org/entity/Q1930833  Brotteaux                  Point(4.… #>  6 http://www.wikidata.org/entity/Q2561831  Charpennes - Charles Hernu Point(4.… #>  7 http://www.wikidata.org/entity/Q776088   Cordeliers                 Point(4.… #>  8 http://www.wikidata.org/entity/Q1960275  Croix-Paquet               Point(4.… #>  9 http://www.wikidata.org/entity/Q2785196  Croix-Rousse               Point(4.… #> 10 http://www.wikidata.org/entity/Q2099187  Cuire                      Point(4.… #> # … with 36 more rows"},{"path":"https://lvaudor.github.io/glitter/reference/show_graph_classes.html","id":null,"dir":"Reference","previous_headings":"","what":"Show the graph of sub/superclasses — show_graph_classes","title":"Show the graph of sub/superclasses — show_graph_classes","text":"Show graph sub/superclasses","code":""},{"path":"https://lvaudor.github.io/glitter/reference/show_graph_classes.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Show the graph of sub/superclasses — show_graph_classes","text":"","code":"show_graph_classes(tib_g, n_min = 10, layout = \"kk\")"},{"path":"https://lvaudor.github.io/glitter/reference/show_graph_classes.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Show the graph of sub/superclasses — show_graph_classes","text":"tib_g tib_g n_min minimal number layout layout graph instance \"kk\" \"sugiyama\"","code":""},{"path":"https://lvaudor.github.io/glitter/reference/show_graph_classes.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Show the graph of sub/superclasses — show_graph_classes","text":"","code":"if (FALSE) { tib_g=build_graph_classes(\"wd:Q627272\") show_graph_classes(tib_g,layout=\"kk\") show_graph_classes(tib_g,layout=\"sugiyama\") }"},{"path":"https://lvaudor.github.io/glitter/reference/sparql-dsl.html","id":null,"dir":"Reference","previous_headings":"","what":"Correspondence between R-DSL functions and SPARQL functions/operators. — set_functions","title":"Correspondence between R-DSL functions and SPARQL functions/operators. — set_functions","text":"Correspondence R-DSL functions SPARQL functions/operators.","code":""},{"path":"https://lvaudor.github.io/glitter/reference/sparql-dsl.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Correspondence between R-DSL functions and SPARQL functions/operators. — set_functions","text":"","code":"set_functions  term_functions  misc_functions  string_functions  numeric_functions  datetime_functions  operators  all_correspondences"},{"path":"https://lvaudor.github.io/glitter/reference/sparql-dsl.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Correspondence between R-DSL functions and SPARQL functions/operators. — set_functions","text":"data frame. R R-DSL function SPARQL SPARQL function args list-column R vs SPARQL argument names object class tbl_df (inherits tbl, data.frame) 21 rows 2 columns. object class tbl_df (inherits tbl, data.frame) 9 rows 2 columns. object class tbl_df (inherits tbl, data.frame) 12 rows 3 columns. object class tbl_df (inherits tbl, data.frame) 4 rows 2 columns. object class tbl_df (inherits tbl, data.frame) 7 rows 2 columns. object class tbl_df (inherits tbl, data.frame) 6 rows 2 columns. object class tbl_df (inherits tbl, data.frame) 66 rows 3 columns.","code":""},{"path":"https://lvaudor.github.io/glitter/reference/spq.html","id":null,"dir":"Reference","previous_headings":"","what":"SPARQL escaping. — spq","title":"SPARQL escaping. — spq","text":"Like dbplyr::spq().","code":""},{"path":"https://lvaudor.github.io/glitter/reference/spq.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"SPARQL escaping. — spq","text":"","code":"spq(...)  is.spq(x)  as.spq(x)"},{"path":"https://lvaudor.github.io/glitter/reference/spq.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"SPARQL escaping. — spq","text":"... Character vectors combined single SPARQL expression. x Object coerce","code":""},{"path":"https://lvaudor.github.io/glitter/reference/spq_add.html","id":null,"dir":"Reference","previous_headings":"","what":"Add a triplet statement to a query — spq_add","title":"Add a triplet statement to a query — spq_add","text":"Add triplet statement query","code":""},{"path":"https://lvaudor.github.io/glitter/reference/spq_add.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add a triplet statement to a query — spq_add","text":"","code":"spq_add(   query = NULL,   triplet = NULL,   subject = NULL,   verb = NULL,   object = NULL,   prefixes = NULL,   required = TRUE,   label = NA,   within_box = c(NA, NA),   within_distance = c(NA, NA) )"},{"path":"https://lvaudor.github.io/glitter/reference/spq_add.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add a triplet statement to a query — spq_add","text":"query query triplet triplet statement (replaces arguments subject verb object) subject anonymous variable (instance, default, \"?subject\") item (instance \"wd:Q456\")) verb property (instance \"wdt:P190\") object anonymous variable (instance, default, \"?object\") item (instance \"wd:Q456\")) prefixes Custom prefixes required whether existence value triplet required (defaults TRUE). set FALSE, triplets query returned even particular triplet missing) label vector variables include label column (defaults NA) within_box provided, rectangular bounding box triplet query. Provided list(southwest=c(long=...,lat=...),northeast=c(long=...,lat=...)) within_distance provided, circular bounding box triplet query. Provided list(center=c(long=...,lat=...), radius=...), radius kilometers. center can also provided variable (instance, \"?location\") center coordinates retrieved directly query.","code":""},{"path":"https://lvaudor.github.io/glitter/reference/spq_add.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Add a triplet statement to a query — spq_add","text":"","code":"# find the cities spq_init() %>% spq_add(\"?city wdt:P31/wdt:P279* wd:Q515\", label = \"?city\") %>% # and their populations spq_add(\"?city wdt:P1082 ?pop\", required = FALSE) %>% # in a bounding box spq_add(\"?city wdt:P625 ?coords\", within_box = list(southwest = c(3,43), northeast = c(7,47))) %>% # limit to 10 lines spq_head(n = 10) #>  #> SELECT ?city ?cityLabel ?pop ?coords #> WHERE{ #>  #> ?city wdt:P31/wdt:P279* wd:Q515. #> OPTIONAL {?city wdt:P1082 ?pop.} #> SERVICE wikibase:box { #> ?city wdt:P625 ?coords. #> bd:serviceParam wikibase:cornerSouthWest 'Point(3 43)'^^geo:wktLiteral. #> bd:serviceParam wikibase:cornerNorthEast 'Point(7 47)'^^geo:wktLiteral. #> } #>  #> SERVICE wikibase:label { bd:serviceParam wikibase:language \"en\".} #> } #>  #> LIMIT 10  if (FALSE) { # find the individuals of the species spq_init() %>% spq_add(\"?mayor wdt:P31 ?species\") %>% # dog, cat or chicken spq_add(\"?species %in% {c('wd:144','wd:146', 'wd:780')}\") %>% # who occupy the function spq_add(\"?mayor p:P39 ?node\") %>% # of mayor spq_add(\"?node ps:P39 wd:Q30185\") %>% # of some places spq_add(\"?node pq:P642 ?place\") %>% spq_perform() }"},{"path":"https://lvaudor.github.io/glitter/reference/spq_arrange.html","id":null,"dir":"Reference","previous_headings":"","what":"Arrange results by variable value — spq_arrange","title":"Arrange results by variable value — spq_arrange","text":"Arrange results variable value","code":""},{"path":"https://lvaudor.github.io/glitter/reference/spq_arrange.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Arrange results by variable value — spq_arrange","text":"","code":"spq_arrange(query, ..., replace = FALSE)"},{"path":"https://lvaudor.github.io/glitter/reference/spq_arrange.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Arrange results by variable value — spq_arrange","text":"query list elements query ... variables arrange (SPARQL strings escaped spq(), strings, see examples) replace whether replace pre-existing arranging","code":""},{"path":"https://lvaudor.github.io/glitter/reference/spq_arrange.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Arrange results by variable value — spq_arrange","text":"","code":"# descending length, ascending itemLabel, \"R\" syntax spq_init() %>%   spq_add(\"?item wdt:P31/wdt:P279* wd:Q4022\", label = c(\"?item\")) %>%   spq_add(\"?item wdt:P2043 ?length\") %>%   spq_add(\"?item wdt:P625 ?location\") %>%   spq_arrange(desc(length), itemLabel) %>%   spq_head(50) #>  #> SELECT ?item ?itemLabel ?length ?location #> WHERE{ #>  #> ?item wdt:P31/wdt:P279* wd:Q4022. #> ?item wdt:P2043 ?length. #> ?item wdt:P625 ?location. #>  #> SERVICE wikibase:label { bd:serviceParam wikibase:language \"en\".} #> } #> ORDER BY DESC(?length) ?itemLabel #> LIMIT 50  # descending length, ascending itemLabel, \"R\" syntax with quotes e.g. for a loop variable <- \"length\" spq_init() %>%   spq_add(\"?item wdt:P31/wdt:P279* wd:Q4022\", label = c(\"?item\")) %>%   spq_add(\"?item wdt:P2043 ?length\") %>%   spq_add(\"?item wdt:P625 ?location\") %>%   spq_arrange(sprintf(\"desc(%s)\", variable), itemLabel) %>%   spq_head(50) #>  #> SELECT ?item ?itemLabel ?length ?location #> WHERE{ #>  #> ?item wdt:P31/wdt:P279* wd:Q4022. #> ?item wdt:P2043 ?length. #> ?item wdt:P625 ?location. #>  #> SERVICE wikibase:label { bd:serviceParam wikibase:language \"en\".} #> } #> ORDER BY DESC(?length) ?itemLabel #> LIMIT 50  # descending length, ascending itemLabel, SPARQL syntax spq_init() %>%   spq_add(\"?item wdt:P31/wdt:P279* wd:Q4022\", label = c(\"?item\")) %>%   spq_add(\"?item wdt:P2043 ?length\") %>%   spq_add(\"?item wdt:P625 ?location\") %>%   spq_arrange(spq(\"DESC(?length) ?itemLabel\")) %>%   spq_head(50) #>  #> SELECT ?item ?itemLabel ?length ?location #> WHERE{ #>  #> ?item wdt:P31/wdt:P279* wd:Q4022. #> ?item wdt:P2043 ?length. #> ?item wdt:P625 ?location. #>  #> SERVICE wikibase:label { bd:serviceParam wikibase:language \"en\".} #> } #> ORDER BY DESC(?length) ?itemLabel #> LIMIT 50  # descending xsd:integer(mort), R syntax spq_init() %>%   spq_add(\"?oeuvre dcterms:creator ?auteur\") %>%   spq_add(\"?auteur bio:death ?mort\") %>%   spq_add(\"?auteur foaf:familyName ?nom\") %>%   spq_filter(as.integer(mort)<as.integer('1924')) %>%   spq_group_by(auteur, nom , mort) %>%   spq_arrange(desc(as.integer(mort))) #> PREFIX foaf: <http://xmlns.com/foaf/0.1/> #> PREFIX bio: <http://vocab.org/bio/0.1/> #> PREFIX dcterms: <http://purl.org/dc/terms/> #> SELECT ?auteur ?mort ?nom #> WHERE{ #>  #> ?oeuvre dcterms:creator ?auteur. #> ?auteur bio:death ?mort. #> ?auteur foaf:familyName ?nom. #> FILTER(xsd:integer(?mort)<xsd:integer(\"1924\")) #> SERVICE wikibase:label { bd:serviceParam wikibase:language \"en\".} #> } #> GROUP BY ?auteur ?mort ?nom #> ORDER BY DESC(xsd:integer(?mort))  # descending as.integer(mort), SPARQL syntax spq_init() %>%   spq_add(\"?oeuvre dcterms:creator ?auteur\") %>%   spq_add(\"?auteur bio:death ?mort\") %>%   spq_add(\"?auteur foaf:familyName ?nom\") %>%   spq_filter(as.integer(mort)<as.integer('1924')) %>%   spq_group_by(auteur, nom, mort) %>%   spq_arrange(spq(\"DESC(?mort)\")) #> PREFIX foaf: <http://xmlns.com/foaf/0.1/> #> PREFIX bio: <http://vocab.org/bio/0.1/> #> PREFIX dcterms: <http://purl.org/dc/terms/> #> SELECT ?auteur ?mort ?nom #> WHERE{ #>  #> ?oeuvre dcterms:creator ?auteur. #> ?auteur bio:death ?mort. #> ?auteur foaf:familyName ?nom. #> FILTER(xsd:integer(?mort)<xsd:integer(\"1924\")) #> SERVICE wikibase:label { bd:serviceParam wikibase:language \"en\".} #> } #> GROUP BY ?auteur ?mort ?nom #> ORDER BY DESC(?mort)  # Usage of the replace argument # replace = FALSE (default) spq_init() %>%   spq_add(\"?item wdt:P31/wdt:P279* wd:Q4022\", label = c(\"?item\")) %>%   spq_add(\"?item wdt:P2043 ?length\") %>%   spq_add(\"?item wdt:P625 ?location\") %>%   spq_arrange(desc(length)) %>%   spq_arrange(location) %>%   spq_head(50) #>  #> SELECT ?item ?itemLabel ?length ?location #> WHERE{ #>  #> ?item wdt:P31/wdt:P279* wd:Q4022. #> ?item wdt:P2043 ?length. #> ?item wdt:P625 ?location. #>  #> SERVICE wikibase:label { bd:serviceParam wikibase:language \"en\".} #> } #> ORDER BY DESC(?length) ?location #> LIMIT 50  # replace = TRUE spq_init() %>%   spq_add(\"?item wdt:P31/wdt:P279* wd:Q4022\", label = c(\"?item\")) %>%   spq_add(\"?item wdt:P2043 ?length\") %>%   spq_add(\"?item wdt:P625 ?location\") %>%   spq_arrange(desc(length)) %>%   spq_arrange(location, replace = TRUE) %>%   spq_head(50) #>  #> SELECT ?item ?itemLabel ?length ?location #> WHERE{ #>  #> ?item wdt:P31/wdt:P279* wd:Q4022. #> ?item wdt:P2043 ?length. #> ?item wdt:P625 ?location. #>  #> SERVICE wikibase:label { bd:serviceParam wikibase:language \"en\".} #> } #> ORDER BY ?location #> LIMIT 50  # Mixing syntaxes spq_init() %>%   spq_add(\"?item wdt:P31/wdt:P279* wd:Q4022\", label = c(\"?item\")) %>%   spq_add(\"?item wdt:P2043 ?length\") %>%   spq_add(\"?item wdt:P625 ?location\") %>%   spq_arrange(desc(length), spq(\"?location\")) %>%   spq_head(50) #>  #> SELECT ?item ?itemLabel ?length ?location #> WHERE{ #>  #> ?item wdt:P31/wdt:P279* wd:Q4022. #> ?item wdt:P2043 ?length. #> ?item wdt:P625 ?location. #>  #> SERVICE wikibase:label { bd:serviceParam wikibase:language \"en\".} #> } #> ORDER BY DESC(?length) ?location #> LIMIT 50"},{"path":"https://lvaudor.github.io/glitter/reference/spq_assemble.html","id":null,"dir":"Reference","previous_headings":"","what":"Assemble query parts into a proper SPARQL query — spq_assemble","title":"Assemble query parts into a proper SPARQL query — spq_assemble","text":"Assemble query parts proper SPARQL query","code":""},{"path":"https://lvaudor.github.io/glitter/reference/spq_assemble.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Assemble query parts into a proper SPARQL query — spq_assemble","text":"","code":"spq_assemble(query, endpoint = \"Wikidata\")"},{"path":"https://lvaudor.github.io/glitter/reference/spq_assemble.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Assemble query parts into a proper SPARQL query — spq_assemble","text":"query list elements query endpoint SPARQL endpoint send query ","code":""},{"path":"https://lvaudor.github.io/glitter/reference/spq_assemble.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Assemble query parts into a proper SPARQL query — spq_assemble","text":"","code":"spq_init() %>% spq_add(\"?city wdt:P31 wd:Q515\", label=\"?city\") %>% spq_add(\"?city wdt:P1082 ?pop\") %>% spq_language(\"fr\") %>% spq_head(n=5) %>% spq_assemble() %>% cat() #>  #> SELECT ?city ?cityLabel ?pop #> WHERE{ #>  #> ?city wdt:P31 wd:Q515. #> ?city wdt:P1082 ?pop. #>  #> SERVICE wikibase:label { bd:serviceParam wikibase:language \"fr\".} #> } #>  #> LIMIT 5"},{"path":"https://lvaudor.github.io/glitter/reference/spq_filter.html","id":null,"dir":"Reference","previous_headings":"","what":"Builds the ","title":"Builds the ","text":"Builds \"filter\" part query.","code":""},{"path":"https://lvaudor.github.io/glitter/reference/spq_filter.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Builds the ","text":"","code":"spq_filter(query = NULL, ...)"},{"path":"https://lvaudor.github.io/glitter/reference/spq_filter.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Builds the ","text":"query list elements query ... variables arrange (SPARQL strings escaped spq(), strings, see examples)","code":""},{"path":"https://lvaudor.github.io/glitter/reference/spq_filter.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Builds the ","text":"","code":"# Corpus of articles with \"wikidata\" in the title spq_init() %>% spq_add(\"?item wdt:P31 wd:Q13442814\") %>% spq_add(\"?item rdfs:label ?itemTitle\") %>% spq_filter(str_detect(str_to_lower(itemTitle), 'wikidata')) %>% spq_filter(lang(itemTitle)==\"en\") %>% spq_head(n = 5) #> PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#> #> SELECT ?item ?itemTitle #> WHERE{ #>  #> ?item wdt:P31 wd:Q13442814. #> ?item rdfs:label ?itemTitle. #> FILTER(REGEX(LCASE(?itemTitle),\"wikidata\")) #> FILTER(lang(?itemTitle)=\"en\") #> SERVICE wikibase:label { bd:serviceParam wikibase:language \"en\".} #> } #>  #> LIMIT 5"},{"path":"https://lvaudor.github.io/glitter/reference/spq_group_by.html","id":null,"dir":"Reference","previous_headings":"","what":"Group the results by one or more variables — spq_group_by","title":"Group the results by one or more variables — spq_group_by","text":"Group results one variables","code":""},{"path":"https://lvaudor.github.io/glitter/reference/spq_group_by.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Group the results by one or more variables — spq_group_by","text":"","code":"spq_group_by(query, ...)"},{"path":"https://lvaudor.github.io/glitter/reference/spq_group_by.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Group the results by one or more variables — spq_group_by","text":"query query ... Either R-DSL strings variable names","code":""},{"path":"https://lvaudor.github.io/glitter/reference/spq_group_by.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Group the results by one or more variables — spq_group_by","text":"","code":"if (FALSE) { spq_init() %>% spq_add(\"?s a ?class\") %>% spq_group_by(class) %>% spq_head(n=3) %>% spq_perform() }"},{"path":"https://lvaudor.github.io/glitter/reference/spq_head.html","id":null,"dir":"Reference","previous_headings":"","what":"Return the first lines of results — spq_head","title":"Return the first lines of results — spq_head","text":"Return first lines results","code":""},{"path":"https://lvaudor.github.io/glitter/reference/spq_head.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Return the first lines of results — spq_head","text":"","code":"spq_head(query, n = 5)"},{"path":"https://lvaudor.github.io/glitter/reference/spq_head.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Return the first lines of results — spq_head","text":"query list elements query n maximum number lines return","code":""},{"path":"https://lvaudor.github.io/glitter/reference/spq_head.html","id":"subsetting","dir":"Reference","previous_headings":"","what":"Subsetting","title":"Return the first lines of results — spq_head","text":"spq_offset() spq_head() useful used spq_arrange() makes order results predictable.","code":""},{"path":"https://lvaudor.github.io/glitter/reference/spq_head.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Return the first lines of results — spq_head","text":"","code":"# Return the default of 5 items spq_init() %>% spq_add(\"?item wdt:P31 wd:Q5\",label=\"?item\") %>% spq_add(\"?item wdt:P19/wdt:P131* wd:Q60\") %>% spq_add(\"?item wikibase:sitelinks ?linkcount\") %>% spq_arrange(desc(linkcount)) %>% spq_head() #>  #> SELECT ?item ?itemLabel ?linkcount #> WHERE{ #>  #> ?item wdt:P31 wd:Q5. #> ?item wdt:P19/wdt:P131* wd:Q60. #> ?item wikibase:sitelinks ?linkcount. #>  #> SERVICE wikibase:label { bd:serviceParam wikibase:language \"en\".} #> } #> ORDER BY DESC(?linkcount) #> LIMIT 5  # Return 42 items spq_init() %>% spq_add(\"?item wdt:P31 wd:Q5\",label=\"?item\") %>% spq_add(\"?item wdt:P19/wdt:P131* wd:Q60\") %>% spq_add(\"?item wikibase:sitelinks ?linkcount\") %>% spq_arrange(desc(linkcount)) %>% spq_head(42) #>  #> SELECT ?item ?itemLabel ?linkcount #> WHERE{ #>  #> ?item wdt:P31 wd:Q5. #> ?item wdt:P19/wdt:P131* wd:Q60. #> ?item wikibase:sitelinks ?linkcount. #>  #> SERVICE wikibase:label { bd:serviceParam wikibase:language \"en\".} #> } #> ORDER BY DESC(?linkcount) #> LIMIT 42"},{"path":"https://lvaudor.github.io/glitter/reference/spq_init.html","id":null,"dir":"Reference","previous_headings":"","what":"Initialize a query object. — spq_init","title":"Initialize a query object. — spq_init","text":"Initialize query object.","code":""},{"path":"https://lvaudor.github.io/glitter/reference/spq_init.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Initialize a query object. — spq_init","text":"","code":"spq_init()"},{"path":"https://lvaudor.github.io/glitter/reference/spq_language.html","id":null,"dir":"Reference","previous_headings":"","what":"Get labels in a specified language (apply only to Wikidata) — spq_language","title":"Get labels in a specified language (apply only to Wikidata) — spq_language","text":"Get labels specified language (apply Wikidata)","code":""},{"path":"https://lvaudor.github.io/glitter/reference/spq_language.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get labels in a specified language (apply only to Wikidata) — spq_language","text":"","code":"spq_language(query = NULL, language = \"en\")"},{"path":"https://lvaudor.github.io/glitter/reference/spq_language.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get labels in a specified language (apply only to Wikidata) — spq_language","text":"query query language language labels provided (defaults \"en\" English). See complete list Wikimedia language codes . can also set language \"auto\" Wikidata SPARQL engine try detect language automatically. Specifying several languages return labels languages following priority specified (e.g. language=\"fr,en\", label returned preferentially French, , French label item, English).","code":""},{"path":"https://lvaudor.github.io/glitter/reference/spq_language.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get labels in a specified language (apply only to Wikidata) — spq_language","text":"","code":"spq_init() %>%  spq_add(\"?film wdt:P31 wd:Q11424\", label=\"?film\") %>%  spq_language(\"fr,en\") %>%  spq_head(10) #>  #> SELECT ?film ?filmLabel #> WHERE{ #>  #> ?film wdt:P31 wd:Q11424. #>  #> SERVICE wikibase:label { bd:serviceParam wikibase:language \"fr,en\".} #> } #>  #> LIMIT 10  spq_init() %>%  spq_add(\"?film wdt:P31 wd:Q11424\", label=\"?film\") %>%  spq_language(\"auto,es,it,de\") %>%  spq_head(10) #>  #> SELECT ?film ?filmLabel #> WHERE{ #>  #> ?film wdt:P31 wd:Q11424. #>  #> SERVICE wikibase:label { bd:serviceParam wikibase:language \"[AUTO_LANGUAGE],es,it,de\".} #> } #>  #> LIMIT 10"},{"path":"https://lvaudor.github.io/glitter/reference/spq_mutate.html","id":null,"dir":"Reference","previous_headings":"","what":"Create and modify variables in the results — spq_mutate","title":"Create and modify variables in the results — spq_mutate","text":"Create modify variables results","code":""},{"path":"https://lvaudor.github.io/glitter/reference/spq_mutate.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create and modify variables in the results — spq_mutate","text":"","code":"spq_mutate(query, ...)"},{"path":"https://lvaudor.github.io/glitter/reference/spq_mutate.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create and modify variables in the results — spq_mutate","text":"query list elements query ... variables arrange (SPARQL strings escaped spq(), strings, see examples)","code":""},{"path":"https://lvaudor.github.io/glitter/reference/spq_mutate.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create and modify variables in the results — spq_mutate","text":"","code":"# common name of a plant species in different languages spq_init() %>% spq_add(\"wd:Q331676 wdt:P1843 ?statement\") %>% spq_mutate(lang = lang(statement)) #>  #> SELECT ?statement (lang(?statement) AS ?lang) #> WHERE{ #>  #> wd:Q331676 wdt:P1843 ?statement. #>  #> SERVICE wikibase:label { bd:serviceParam wikibase:language \"en\".} #> } #>"},{"path":"https://lvaudor.github.io/glitter/reference/spq_offset.html","id":null,"dir":"Reference","previous_headings":"","what":"Offset the first generated result — spq_offset","title":"Offset the first generated result — spq_offset","text":"Offset first generated result","code":""},{"path":"https://lvaudor.github.io/glitter/reference/spq_offset.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Offset the first generated result — spq_offset","text":"","code":"spq_offset(query, n = 5)"},{"path":"https://lvaudor.github.io/glitter/reference/spq_offset.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Offset the first generated result — spq_offset","text":"query list elements query n maximum number lines return","code":""},{"path":"https://lvaudor.github.io/glitter/reference/spq_offset.html","id":"subsetting","dir":"Reference","previous_headings":"","what":"Subsetting","title":"Offset the first generated result — spq_offset","text":"spq_offset() spq_head() useful used spq_arrange() makes order results predictable.","code":""},{"path":"https://lvaudor.github.io/glitter/reference/spq_offset.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Offset the first generated result — spq_offset","text":"","code":"# Return 42 items spq_init() %>% spq_add(\"?item wdt:P31 wd:Q5\",label=\"?item\") %>% spq_add(\"?item wdt:P19/wdt:P131* wd:Q60\") %>% spq_add(\"?item wikibase:sitelinks ?linkcount\") %>% spq_arrange(desc(linkcount)) %>% spq_head(n=42) #>  #> SELECT ?item ?itemLabel ?linkcount #> WHERE{ #>  #> ?item wdt:P31 wd:Q5. #> ?item wdt:P19/wdt:P131* wd:Q60. #> ?item wikibase:sitelinks ?linkcount. #>  #> SERVICE wikibase:label { bd:serviceParam wikibase:language \"en\".} #> } #> ORDER BY DESC(?linkcount) #> LIMIT 42  # Return 42 items after the first 11 items spq_init() %>% spq_add(\"?item wdt:P31 wd:Q5\",label=\"?item\") %>% spq_add(\"?item wdt:P19/wdt:P131* wd:Q60\") %>% spq_add(\"?item wikibase:sitelinks ?linkcount\") %>% spq_arrange(desc(linkcount)) %>% spq_head(42) %>% spq_offset(11) #>  #> SELECT ?item ?itemLabel ?linkcount #> WHERE{ #>  #> ?item wdt:P31 wd:Q5. #> ?item wdt:P19/wdt:P131* wd:Q60. #> ?item wikibase:sitelinks ?linkcount. #>  #> SERVICE wikibase:label { bd:serviceParam wikibase:language \"en\".} #> } #> ORDER BY DESC(?linkcount) #> LIMIT 42OFFSET 11"},{"path":"https://lvaudor.github.io/glitter/reference/spq_perform.html","id":null,"dir":"Reference","previous_headings":"","what":"Assemble query parts into a sparql query and send it to endpoint to get a tibble as a result. — spq_perform","title":"Assemble query parts into a sparql query and send it to endpoint to get a tibble as a result. — spq_perform","text":"Assemble query parts sparql query send endpoint get tibble result.","code":""},{"path":"https://lvaudor.github.io/glitter/reference/spq_perform.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Assemble query parts into a sparql query and send it to endpoint to get a tibble as a result. — spq_perform","text":"","code":"spq_perform(query, endpoint = \"Wikidata\")"},{"path":"https://lvaudor.github.io/glitter/reference/spq_perform.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Assemble query parts into a sparql query and send it to endpoint to get a tibble as a result. — spq_perform","text":"query list elements query endpoint string url corresponding SPARQL endpoint. Defaults \"Wikidata\"","code":""},{"path":"https://lvaudor.github.io/glitter/reference/spq_perform.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Assemble query parts into a sparql query and send it to endpoint to get a tibble as a result. — spq_perform","text":"","code":"query=spq_init() %>% spq_add(subject=\"?city\",verb=\"wdt:P31\",object=\"wd:Q515\") %>% spq_add(subject=\"?city\",verb=\"wdt:P1082\",object=\"?pop\", label=\"?city\") %>% spq_head(n=5) %>%  spq_perform()"},{"path":"https://lvaudor.github.io/glitter/reference/spq_prefix.html","id":null,"dir":"Reference","previous_headings":"","what":"Add prefixes to the query — spq_prefix","title":"Add prefixes to the query — spq_prefix","text":"Add prefixes query","code":""},{"path":"https://lvaudor.github.io/glitter/reference/spq_prefix.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add prefixes to the query — spq_prefix","text":"","code":"spq_prefix(query = NULL, auto = TRUE, prefixes = NULL)"},{"path":"https://lvaudor.github.io/glitter/reference/spq_prefix.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add prefixes to the query — spq_prefix","text":"query list elements query auto whether use built-prefixes prefixes vector prefixes","code":""},{"path":"https://lvaudor.github.io/glitter/reference/spq_prefix.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Add prefixes to the query — spq_prefix","text":"","code":"spq_init() %>% spq_prefix(prefixes=c(dbo=\"http://dbpedia.org/ontology/\")) #> PREFIX dbo: <http://dbpedia.org/ontology/> #> SELECT * #> WHERE{ #>  #>  #> SERVICE wikibase:label { bd:serviceParam wikibase:language \"en\".} #> } #>"},{"path":"https://lvaudor.github.io/glitter/reference/spq_select.html","id":null,"dir":"Reference","previous_headings":"","what":"Select (and create) particular variables — spq_select","title":"Select (and create) particular variables — spq_select","text":"Select (create) particular variables","code":""},{"path":"https://lvaudor.github.io/glitter/reference/spq_select.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Select (and create) particular variables — spq_select","text":"","code":"spq_select(query = NULL, ..., spq_duplicate = NULL)"},{"path":"https://lvaudor.github.io/glitter/reference/spq_select.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Select (and create) particular variables — spq_select","text":"query list elements query ... variables arrange (SPARQL strings escaped spq(), strings, see examples) spq_duplicate handle duplicates: keep (NULL), eliminate (distinct) reduce (reduced, advanced usage).","code":""},{"path":"https://lvaudor.github.io/glitter/reference/spq_select.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Select (and create) particular variables — spq_select","text":"","code":"query = spq_init() spq_select(query, count = n (human), eyecolorLabel, haircolorLabel) #>  #> SELECT (COUNT(?human) AS ?count) ?eyecolorLabel ?haircolorLabel #> WHERE{ #>  #>  #> SERVICE wikibase:label { bd:serviceParam wikibase:language \"en\".} #> } #>"},{"path":"https://lvaudor.github.io/glitter/reference/spq_summarise.html","id":null,"dir":"Reference","previous_headings":"","what":"Summarise each group of results to fewer results — spq_summarise","title":"Summarise each group of results to fewer results — spq_summarise","text":"Summarise group results fewer results","code":""},{"path":"https://lvaudor.github.io/glitter/reference/spq_summarise.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Summarise each group of results to fewer results — spq_summarise","text":"","code":"spq_summarise(query, ...)  spq_summarize(query, ...)"},{"path":"https://lvaudor.github.io/glitter/reference/spq_summarise.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Summarise each group of results to fewer results — spq_summarise","text":"query list elements query ... variables arrange (SPARQL strings escaped spq(), strings, see examples)","code":""},{"path":"https://lvaudor.github.io/glitter/reference/spq_summarise.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Summarise each group of results to fewer results — spq_summarise","text":"","code":"result=spq_init() %>% spq_add(\"?item wdt:P361 wd:Q297853\") %>% spq_add(\"?item wdt:P1082 ?folkm_ngd\") %>% spq_add(\"?area wdt:P31 wd:Q1907114\", label = \"?area\") %>% spq_add(\"?area wdt:P527 ?item\") %>% spq_group_by(area, areaLabel)  %>% spq_summarise(total_folkm = sum(folkm_ngd))"},{"path":"https://lvaudor.github.io/glitter/reference/subclasses_of.html","id":null,"dir":"Reference","previous_headings":"","what":"Get subclasses of a Wikidata class — subclasses_of","title":"Get subclasses of a Wikidata class — subclasses_of","text":"Get subclasses Wikidata class","code":""},{"path":"https://lvaudor.github.io/glitter/reference/subclasses_of.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get subclasses of a Wikidata class — subclasses_of","text":"","code":"subclasses_of(id, include_self = FALSE)"},{"path":"https://lvaudor.github.io/glitter/reference/subclasses_of.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get subclasses of a Wikidata class — subclasses_of","text":"id id class include_self whether include class results table","code":""},{"path":"https://lvaudor.github.io/glitter/reference/subclasses_of.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get subclasses of a Wikidata class — subclasses_of","text":"","code":"subclasses_of(\"wd:Q7930989\") #> # A tibble: 36 × 4 #>    from        to          classes     classesLabel                              #>    <chr>       <chr>       <chr>       <chr>                                     #>  1 wd:Q7930989 wd:Q515     wd:Q515     city                                      #>  2 wd:Q7930989 wd:Q3957    wd:Q3957    town                                      #>  3 wd:Q7930989 wd:Q123601  wd:Q123601  cities and towns in Lebanon               #>  4 wd:Q7930989 wd:Q159438  wd:Q159438  Hero City                                 #>  5 wd:Q7930989 wd:Q174844  wd:Q174844  megacity                                  #>  6 wd:Q7930989 wd:Q187768  wd:Q187768  cities and towns in Russia                #>  7 wd:Q7930989 wd:Q692581  wd:Q692581  holy city                                 #>  8 wd:Q7930989 wd:Q896881  wd:Q896881  city with tens of thousands of inhabitan… #>  9 wd:Q7930989 wd:Q902814  wd:Q902814  border town                               #> 10 wd:Q7930989 wd:Q3199141 wd:Q3199141 city of Indonesia                         #> # … with 26 more rows"},{"path":"https://lvaudor.github.io/glitter/reference/superclasses_of.html","id":null,"dir":"Reference","previous_headings":"","what":"Get superclasses of a Wikidata class — superclasses_of","title":"Get superclasses of a Wikidata class — superclasses_of","text":"Get superclasses Wikidata class","code":""},{"path":"https://lvaudor.github.io/glitter/reference/superclasses_of.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get superclasses of a Wikidata class — superclasses_of","text":"","code":"superclasses_of(id, include_self = FALSE)"},{"path":"https://lvaudor.github.io/glitter/reference/superclasses_of.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get superclasses of a Wikidata class — superclasses_of","text":"id id class include_self whether include class results table","code":""},{"path":"https://lvaudor.github.io/glitter/reference/superclasses_of.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get superclasses of a Wikidata class — superclasses_of","text":"","code":"superclasses_of(\"wd:Q7930989\") #> # A tibble: 4 × 4 #>   from        to          classes     classesLabel                      #>   <chr>       <chr>       <chr>       <chr>                             #> 1 wd:Q56061   wd:Q7930989 wd:Q56061   administrative territorial entity #> 2 wd:Q486972  wd:Q7930989 wd:Q486972  human settlement                  #> 3 wd:Q1048835 wd:Q7930989 wd:Q1048835 political territorial entity      #> 4 wd:Q3257686 wd:Q7930989 wd:Q3257686 locality"},{"path":"https://lvaudor.github.io/glitter/reference/transform_wikidata_coords.html","id":null,"dir":"Reference","previous_headings":"","what":"Get coords at lat-lng from Wikidata format — transform_wikidata_coords","title":"Get coords at lat-lng from Wikidata format — transform_wikidata_coords","text":"Get coords lat-lng Wikidata format","code":""},{"path":"https://lvaudor.github.io/glitter/reference/transform_wikidata_coords.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get coords at lat-lng from Wikidata format — transform_wikidata_coords","text":"","code":"transform_wikidata_coords(data, coord_column, prefix = \"\")"},{"path":"https://lvaudor.github.io/glitter/reference/transform_wikidata_coords.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get coords at lat-lng from Wikidata format — transform_wikidata_coords","text":"data tibble coord_column name column coordinates formatted 'Point(..... ....)' prefix prefix appended \"lat-lng\" columns (defaults \"\" -prefix-)","code":""},{"path":"https://lvaudor.github.io/glitter/reference/transform_wikidata_coords.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get coords at lat-lng from Wikidata format — transform_wikidata_coords","text":"","code":"query='SELECT ?item ?itemLabel ?coords ?date {   ?item wdt:P361 wd:Q1552;         wdt:P625 ?coords.   OPTIONAL{?item wdt:P1619 ?date.}   SERVICE wikibase:label { bd:serviceParam wikibase:language \"en\" . } } ORDER BY ?itemLabel ' tib=send_sparql(query) transform_wikidata_coords(tib, \"coords\") #> # A tibble: 46 × 5 #>    item                                itemLabel date                  lat   lng #>    <chr>                               <chr>     <dttm>              <dbl> <dbl> #>  1 http://www.wikidata.org/entity/Q55… Q55598901 NA                   45.7  4.80 #>  2 http://www.wikidata.org/entity/Q56… Q56300135 NA                   45.7  4.80 #>  3 http://www.wikidata.org/entity/Q21… Ampère -… 1978-05-02 00:00:00  45.8  4.83 #>  4 http://www.wikidata.org/entity/Q52… Bellecour 1978-05-02 00:00:00  45.8  4.83 #>  5 http://www.wikidata.org/entity/Q19… Brotteaux 1978-05-02 00:00:00  45.8  4.86 #>  6 http://www.wikidata.org/entity/Q25… Charpenn… 1978-05-02 00:00:00  45.8  4.86 #>  7 http://www.wikidata.org/entity/Q77… Cordelie… 1978-05-02 00:00:00  45.8  4.84 #>  8 http://www.wikidata.org/entity/Q19… Croix-Pa… 1891-04-12 00:00:00  45.8  4.84 #>  9 http://www.wikidata.org/entity/Q27… Croix-Ro… 1891-04-12 00:00:00  45.8  4.83 #> 10 http://www.wikidata.org/entity/Q20… Cuire     1984-12-10 00:00:00  45.8  4.83 #> # … with 36 more rows"},{"path":"https://lvaudor.github.io/glitter/reference/usual_endpoints.html","id":null,"dir":"Reference","previous_headings":"","what":"Usual endpoints: this dataset allows the user to refer to them using a simplified name rather than their full url. — usual_endpoints","title":"Usual endpoints: this dataset allows the user to refer to them using a simplified name rather than their full url. — usual_endpoints","text":"Usual endpoints: dataset allows user refer using simplified name rather full url.","code":""},{"path":"https://lvaudor.github.io/glitter/reference/usual_endpoints.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Usual endpoints: this dataset allows the user to refer to them using a simplified name rather than their full url. — usual_endpoints","text":"","code":"usual_endpoints"},{"path":"https://lvaudor.github.io/glitter/reference/usual_endpoints.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Usual endpoints: this dataset allows the user to refer to them using a simplified name rather than their full url. — usual_endpoints","text":"data frame usual SPARQL endpoints abbreviated names name abbreviated name SPARQL endpoint url full address SPARQL endpoint","code":""},{"path":"https://lvaudor.github.io/glitter/reference/usual_prefixes.html","id":null,"dir":"Reference","previous_headings":"","what":"Usual prefixes: this dataset allows the user to refer to usual prefixes in their queries without manually specifying the associated urls. — usual_prefixes","title":"Usual prefixes: this dataset allows the user to refer to usual prefixes in their queries without manually specifying the associated urls. — usual_prefixes","text":"Usual prefixes: dataset allows user refer usual prefixes queries without manually specifying associated urls.","code":""},{"path":"https://lvaudor.github.io/glitter/reference/usual_prefixes.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Usual prefixes: this dataset allows the user to refer to usual prefixes in their queries without manually specifying the associated urls. — usual_prefixes","text":"","code":"usual_prefixes"},{"path":"https://lvaudor.github.io/glitter/reference/usual_prefixes.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Usual prefixes: this dataset allows the user to refer to usual prefixes in their queries without manually specifying the associated urls. — usual_prefixes","text":"data frame usual prefixes type type prefix name prefix url corresponding ontology","code":""},{"path":"https://lvaudor.github.io/glitter/reference/wd_properties.html","id":null,"dir":"Reference","previous_headings":"","what":"Wikidata properties — wd_properties","title":"Wikidata properties — wd_properties","text":"Wikidata properties","code":""},{"path":"https://lvaudor.github.io/glitter/reference/wd_properties.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Wikidata properties — wd_properties","text":"","code":"wd_properties"},{"path":"https://lvaudor.github.io/glitter/reference/wd_properties.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Wikidata properties — wd_properties","text":"data frame 8939 rows 5 variables: id id type property type label property label description property description altLabel alternative labels","code":""},{"path":"https://lvaudor.github.io/glitter/reference/wd_properties.html","id":"source","dir":"Reference","previous_headings":"","what":"Source","title":"Wikidata properties — wd_properties","text":"Wikidata https://query.wikidata.org/#SELECT%20%3Fproperty%20%3FpropertyType%20%3FpropertyLabel%20%3FpropertyDescription%20%3FpropertyAltLabel%0AWHERE%20%7B%0A%20%20%3Fproperty%20wikibase%3ApropertyType%20%3FpropertyType.%0A%20%20SERVICE%20wikibase%3Alabel%20%7Bbd%3AserviceParam%20wikibase%3Alanguage%20%22%5BAUTO_LANGUAGE%5D%2Cen%22.%20%7D%0A%7D%0AORDER%20BY%20ASC%20%28xsd%3Ainteger%28STRAFTER%28STR%28%3Fproperty%29%2C%20%27P%27%29%29%29","code":""}]
